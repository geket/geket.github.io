<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Portfolio | æ¡œ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Noto+Serif+JP:wght@200;300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --petal-pink: #ffb7c5;
            --petal-soft: #ffd1dc;
            --petal-deep: #e891a0;
            --bark-brown: #4a3728;
            --night-indigo: #1a1a2e;
            --twilight: #16213e;
            --moon-glow: #f8f0e3;
            --gold-accent: #d4af37;
            --mist: rgba(255, 183, 197, 0.1);
            --cloud-1: rgba(255, 220, 230, 0.08);
            --cloud-2: rgba(200, 180, 220, 0.06);
            --cloud-3: rgba(255, 200, 210, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: linear-gradient(180deg, 
                var(--night-indigo) 0%, 
                #2d1f3d 30%,
                #3d2a4a 50%,
                #4a3555 70%,
                var(--twilight) 100%);
            color: var(--moon-glow);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ========== ANIMATED CLOUDS ========== */
        /* Weather Effects Layer */
        .weather-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 100;
            overflow: hidden;
        }

        /* Rain */
        .rain-drop {
            position: absolute;
            width: 2px;
            height: 15px;
            background: linear-gradient(180deg, rgba(174, 194, 224, 0.8), rgba(174, 194, 224, 0.3));
            animation: rainFall linear infinite;
        }

        @keyframes rainFall {
            0% {
                transform: translateY(-100vh) translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) translateX(10px);
                opacity: 0.3;
            }
        }

        /* Snow */
        .snow-flake {
            position: absolute;
            color: white;
            font-size: 12px;
            animation: snowFall linear infinite;
        }

        @keyframes snowFall {
            0% {
                transform: translateY(-100vh) translateX(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) translateX(50px) rotate(360deg);
                opacity: 0.5;
            }
        }

        /* Hail */
        .hail-stone {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, white, #d0e0f0);
            border-radius: 50%;
            animation: hailFall linear infinite;
        }

        @keyframes hailFall {
            0% {
                transform: translateY(-100vh);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh);
                opacity: 0.6;
            }
        }

        /* Fog overlay */
        .fog-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, 
                rgba(200, 200, 220, 0.3) 0%,
                rgba(180, 180, 200, 0.2) 50%,
                rgba(200, 200, 220, 0.3) 100%);
            animation: fogDrift 20s ease-in-out infinite;
        }

        @keyframes fogDrift {
            0%, 100% {
                opacity: 0.4;
                transform: translateX(0);
            }
            50% {
                opacity: 0.6;
                transform: translateX(20px);
            }
        }

        /* Wind effect - stronger sakura movement */
        .windy .petal {
            animation-duration: 3s !important;
        }

        /* Cloudy - dimmer background */
        .cloudy-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background: rgba(100, 100, 120, 0.15);
            pointer-events: none;
        }

        /* Sunny - brighter background */
        .sunny-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at top, 
                rgba(255, 250, 200, 0.1) 0%,
                transparent 50%);
            pointer-events: none;
        }

        .cloud-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .cloud {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0;
            animation: floatCloud linear infinite;
        }

        .cloud-layer-1 .cloud {
            background: radial-gradient(ellipse, var(--cloud-1), transparent 70%);
        }

        .cloud-layer-2 .cloud {
            background: radial-gradient(ellipse, var(--cloud-2), transparent 70%);
        }

        .cloud-layer-3 .cloud {
            background: radial-gradient(ellipse, var(--cloud-3), transparent 70%);
        }

        @keyframes floatCloud {
            0% {
                transform: translateX(-100%) translateY(0);
                opacity: 0;
            }
            5% {
                opacity: 1;
            }
            95% {
                opacity: 1;
            }
            100% {
                transform: translateX(calc(100vw + 100%)) translateY(20px);
                opacity: 0;
            }
        }

        /* Wispy cloud shapes */
        .cloud-wisp {
            position: absolute;
            background: linear-gradient(90deg, transparent, rgba(255, 200, 220, 0.04), transparent);
            height: 2px;
            border-radius: 50%;
            filter: blur(8px);
            animation: wispFloat linear infinite;
        }

        @keyframes wispFloat {
            0% {
                transform: translateX(-100%) scaleX(1);
                opacity: 0;
            }
            10% {
                opacity: 0.6;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateX(100vw) scaleX(1.5);
                opacity: 0;
            }
        }

        /* Moon glow */
        .celestial {
            position: fixed;
            top: 80px;
            right: 15%;
            width: 80px;
            height: 80px;
            z-index: 0;
            transition: transform 0.3s ease-out;
            overflow: visible;
        }

        /* ===== MOON WITH PHASES ===== */
        .moon-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: visible;
            animation: moonFloat 12s ease-in-out infinite;
        }

        @keyframes moonFloat {
            0%, 100% {
                transform: translateY(0) translateX(0);
            }
            25% {
                transform: translateY(-8px) translateX(3px);
            }
            50% {
                transform: translateY(-4px) translateX(-3px);
            }
            75% {
                transform: translateY(-10px) translateX(2px);
            }
        }

        .moon-body {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, 
                #fdfcf9 0%, 
                #f5f0e6 30%, 
                #e8e0d0 70%, 
                #d4caba 100%);
            box-shadow: 
                inset -8px -5px 15px rgba(0, 0, 0, 0.15),
                inset 5px 5px 10px rgba(255, 255, 255, 0.5),
                0 0 40px rgba(255, 250, 230, 0.6),
                0 0 80px rgba(255, 245, 220, 0.3);
            overflow: hidden;
            animation: moonGlow 6s ease-in-out infinite;
        }

        @keyframes moonGlow {
            0%, 100% {
                box-shadow: 
                    inset -8px -5px 15px rgba(0, 0, 0, 0.15),
                    inset 5px 5px 10px rgba(255, 255, 255, 0.5),
                    0 0 40px rgba(255, 250, 230, 0.6),
                    0 0 80px rgba(255, 245, 220, 0.3);
            }
            50% {
                box-shadow: 
                    inset -8px -5px 15px rgba(0, 0, 0, 0.15),
                    inset 5px 5px 10px rgba(255, 255, 255, 0.5),
                    0 0 50px rgba(255, 250, 230, 0.8),
                    0 0 100px rgba(255, 245, 220, 0.5);
            }
        }

        /* Moon craters */
        .moon-body::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 15px;
            background: radial-gradient(circle, rgba(180, 170, 155, 0.4) 0%, transparent 70%);
            border-radius: 50%;
            top: 20%;
            left: 25%;
        }

        .moon-body::after {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            background: radial-gradient(circle, rgba(180, 170, 155, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            top: 50%;
            left: 55%;
        }

        .moon-crater-small {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, rgba(180, 170, 155, 0.35) 0%, transparent 70%);
            border-radius: 50%;
            top: 65%;
            left: 30%;
        }

        /* Moon phase shadow overlay */
        .moon-phase {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: #1a1a2e;
            opacity: 0.95;
            transition: clip-path 0.5s ease;
        }

        /* Moon glow */
        .moon-glow {
            position: absolute;
            top: -30%;
            left: -30%;
            width: 160%;
            height: 160%;
            background: radial-gradient(circle, 
                rgba(255, 250, 240, 0.15) 0%,
                rgba(255, 230, 210, 0.08) 40%,
                transparent 70%);
            animation: moonGlowPulse 8s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes moonGlowPulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        /* Moon clouds that drift in front */
        .moon-clouds {
            position: absolute;
            top: -40%;
            left: -40%;
            width: 180%;
            height: 180%;
            pointer-events: none;
            z-index: 10;
        }

        .moon-cloud {
            position: absolute;
            background: radial-gradient(ellipse, 
                rgba(200, 190, 220, 0.3) 0%,
                rgba(180, 170, 200, 0.15) 40%,
                transparent 70%);
            border-radius: 50%;
            opacity: 0;
            animation: driftCloud linear infinite, cloudWind 3s ease-in-out infinite;
        }

        @keyframes driftCloud {
            0% {
                transform: translateX(-100%) translateY(0) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            50% {
                transform: translateX(50%) translateY(-5px) scale(1.05);
                opacity: 0.8;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateX(200%) translateY(-10px) scale(1);
                opacity: 0;
            }
        }

        /* Wind blowing effect - clouds stretch and compress */
        @keyframes cloudWind {
            0%, 100% {
                filter: blur(15px);
                transform: scaleX(1) scaleY(1);
            }
            25% {
                filter: blur(18px);
                transform: scaleX(1.15) scaleY(0.9);
            }
            50% {
                filter: blur(12px);
                transform: scaleX(0.95) scaleY(1.05);
            }
            75% {
                filter: blur(20px);
                transform: scaleX(1.2) scaleY(0.85);
            }
        }

        /* Moon sparkles - twinkling stars */
        .moon-sparkles {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            pointer-events: none;
            z-index: 5;
        }

        .moon-sparkle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 
                0 0 3px rgba(255, 255, 255, 0.8),
                0 0 6px rgba(255, 250, 230, 0.6);
            animation: twinkle ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% {
                opacity: 0.2;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.5);
            }
        }

        /* Star burst effect for extra sparkle */
        .moon-sparkle::before,
        .moon-sparkle::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, white, transparent);
            transform: translate(-50%, -50%);
            opacity: 0.6;
        }

        .moon-sparkle::after {
            transform: translate(-50%, -50%) rotate(90deg);
        }

        /* Night Sky */
        .night-sky {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .night-sky.active {
            opacity: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 2px rgba(255, 255, 255, 0.8);
            animation: starTwinkle ease-in-out infinite;
        }

        @keyframes starTwinkle {
            0%, 100% {
                opacity: 0.3;
            }
            50% {
                opacity: 1;
            }
        }

        .constellation {
            position: absolute;
            pointer-events: none;
        }

        .constellation-line {
            position: absolute;
            height: 1px;
            background: rgba(255, 255, 255, 0.2);
            transform-origin: left center;
        }

        .constellation-star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.9);
        }

        /* Shooting Stars / Meteors */
        .shooting-star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.9);
            animation: meteorFall linear forwards;
        }

        /* Comet tail effect */
        .shooting-star::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.9) 0%,
                rgba(200, 220, 255, 0.6) 30%,
                rgba(150, 180, 255, 0.3) 60%,
                transparent 100%);
            transform: translate(-100%, -50%);
            border-radius: 50%;
            filter: blur(1px);
        }

        /* Meteor glow trail */
        .shooting-star::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 60px;
            height: 4px;
            background: radial-gradient(ellipse, 
                rgba(255, 255, 255, 0.6) 0%,
                rgba(180, 200, 255, 0.3) 40%,
                transparent 70%);
            transform: translate(-100%, -50%);
            filter: blur(2px);
        }

        @keyframes meteorFall {
            0% {
                opacity: 0;
                transform: translate(0, 0) rotate(var(--meteor-angle));
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                opacity: 0;
                transform: translate(var(--meteor-distance-x), var(--meteor-distance-y)) rotate(var(--meteor-angle));
            }
        }

        /* ===== SUN ===== */
        .sun-container {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        .sun-body {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle at 35% 35%, 
                #fff9e6 0%, 
                #ffeb80 20%, 
                #ffd700 50%, 
                #ffb700 80%, 
                #ff9500 100%);
            box-shadow: 
                inset -5px -5px 20px rgba(255, 150, 0, 0.4),
                inset 5px 5px 15px rgba(255, 255, 200, 0.6),
                0 0 60px rgba(255, 200, 50, 0.8),
                0 0 120px rgba(255, 180, 0, 0.4);
            animation: sunPulse 4s ease-in-out infinite;
            z-index: 2;
        }

        @keyframes sunPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 
                    inset -5px -5px 20px rgba(255, 150, 0, 0.4),
                    inset 5px 5px 15px rgba(255, 255, 200, 0.6),
                    0 0 60px rgba(255, 200, 50, 0.8),
                    0 0 120px rgba(255, 180, 0, 0.4);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 
                    inset -5px -5px 20px rgba(255, 150, 0, 0.4),
                    inset 5px 5px 15px rgba(255, 255, 200, 0.6),
                    0 0 80px rgba(255, 200, 50, 0.9),
                    0 0 150px rgba(255, 180, 0, 0.5);
            }
        }

        /* Sun rays - Kris Blade Style */
        .sun-rays {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: visible;
            animation: sunRaysSpin 90s linear infinite;
        }

        .kris-blade {
            position: absolute;
            bottom: 50%;
            left: 50%;
            width: 12px;
            height: 40px;
            transform-origin: center bottom;
            margin-left: -6px;
            transform: rotate(var(--ray-rotation, 0deg)) translateY(var(--ray-translate, -40px));
            animation: bladeShimmer 2s ease-in-out infinite;
            overflow: visible;
        }

        .kris-blade svg {
            width: 100%;
            height: 100%;
            overflow: visible;
            filter: drop-shadow(0 0 4px rgba(255, 200, 50, 0.8)) drop-shadow(0 0 8px rgba(255, 150, 0, 0.5));
        }

        /* Stagger blade animations for 12 blades */
        .kris-blade:nth-child(1) { animation-delay: 0s; }
        .kris-blade:nth-child(2) { animation-delay: 0.15s; }
        .kris-blade:nth-child(3) { animation-delay: 0.3s; }
        .kris-blade:nth-child(4) { animation-delay: 0.45s; }
        .kris-blade:nth-child(5) { animation-delay: 0.6s; }
        .kris-blade:nth-child(6) { animation-delay: 0.75s; }
        .kris-blade:nth-child(7) { animation-delay: 0.9s; }
        .kris-blade:nth-child(8) { animation-delay: 1.05s; }
        .kris-blade:nth-child(9) { animation-delay: 1.2s; }
        .kris-blade:nth-child(10) { animation-delay: 1.35s; }
        .kris-blade:nth-child(11) { animation-delay: 1.5s; }
        .kris-blade:nth-child(12) { animation-delay: 1.65s; }

        @keyframes bladeShimmer {
            0%, 100% {
                opacity: 0.85;
                filter: drop-shadow(0 0 4px rgba(255, 200, 50, 0.8));
            }
            50% {
                opacity: 1;
                filter: drop-shadow(0 0 8px rgba(255, 220, 100, 1));
            }
        }

        /* Flame Particles Container with Gooey Filter */
        .flame-particles {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            overflow: visible;
            pointer-events: none;
            filter: url(#flameGooey);
        }

        .flame-particle {
            position: absolute;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            background: radial-gradient(ellipse at 30% 30%, 
                rgba(255, 255, 220, 1) 0%,
                rgba(255, 220, 100, 0.9) 30%,
                rgba(255, 150, 50, 0.7) 60%,
                rgba(255, 100, 0, 0.4) 100%);
            animation: flameFloat var(--flame-duration, 2s) ease-out infinite;
            animation-delay: var(--flame-delay, 0s);
            opacity: 0;
            box-shadow: inset 0 0 4px rgba(255, 255, 200, 0.8);
        }

        .flame-particle.ember {
            border-radius: 50%;
            background: radial-gradient(circle,
                rgba(255, 255, 240, 1) 0%,
                rgba(255, 200, 80, 0.9) 50%,
                rgba(255, 120, 0, 0.5) 100%);
            animation: emberFloat var(--flame-duration, 1.5s) ease-out infinite;
            box-shadow: 0 0 6px rgba(255, 180, 50, 0.8);
        }

        .flame-particle.spark {
            border-radius: 50%;
            background: #fffaf0;
            box-shadow: 
                0 0 3px rgba(255, 255, 255, 1),
                0 0 6px rgba(255, 200, 50, 0.9);
            animation: sparkFloat var(--flame-duration, 1s) ease-out infinite;
        }

        .flame-particle.wisp {
            border-radius: 50% 50% 50% 50% / 70% 70% 30% 30%;
            background: linear-gradient(to top,
                rgba(255, 180, 50, 0.85) 0%,
                rgba(255, 120, 0, 0.5) 50%,
                transparent 100%);
            animation: wispFloat var(--flame-duration, 2s) ease-out infinite;
        }

        /* New scatter particles - small and erratic */
        .flame-particle.scatter {
            border-radius: 50%;
            background: radial-gradient(circle,
                rgba(255, 255, 200, 1) 0%,
                rgba(255, 180, 80, 0.8) 60%,
                rgba(255, 100, 0, 0.3) 100%);
            animation: scatterFloat var(--flame-duration, 1.2s) cubic-bezier(0.2, 0.8, 0.3, 1) infinite;
            box-shadow: 0 0 3px rgba(255, 200, 100, 0.9);
        }

        /* Mingle particles - orbit and merge */
        .flame-particle.mingle {
            border-radius: 50%;
            background: radial-gradient(circle,
                rgba(255, 240, 180, 1) 0%,
                rgba(255, 200, 100, 0.85) 50%,
                rgba(255, 140, 50, 0.5) 100%);
            animation: mingleFloat var(--flame-duration, 2.5s) ease-in-out infinite;
            box-shadow: inset 0 0 3px rgba(255, 255, 220, 0.9);
        }

        @keyframes flameFloat {
            0% {
                transform: translate(var(--start-x, 0), var(--start-y, 0)) scale(0.5);
                opacity: 0;
            }
            15% { opacity: 1; }
            50% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 20px) * 0.5), calc(var(--start-y, 0) + var(--end-y, -60px) * 0.5)) scale(1.15);
                opacity: 0.95;
            }
            100% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 20px)), calc(var(--start-y, 0) + var(--end-y, -60px))) scale(0.2);
                opacity: 0;
            }
        }

        @keyframes emberFloat {
            0% {
                transform: translate(var(--start-x, 0), var(--start-y, 0)) scale(0.6);
                opacity: 0;
            }
            15% { opacity: 1; }
            60% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 15px) * 0.7), calc(var(--start-y, 0) + var(--end-y, -40px) * 0.7)) scale(1.1);
                opacity: 0.85;
            }
            100% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 15px)), calc(var(--start-y, 0) + var(--end-y, -40px))) scale(0);
                opacity: 0;
            }
        }

        @keyframes sparkFloat {
            0% {
                transform: translate(var(--start-x, 0), var(--start-y, 0)) scale(1);
                opacity: 0;
            }
            10% { opacity: 1; }
            100% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 25px)), calc(var(--start-y, 0) + var(--end-y, -50px))) scale(0);
                opacity: 0;
            }
        }

        @keyframes wispFloat {
            0% {
                transform: translate(var(--start-x, 0), var(--start-y, 0)) scaleX(0.5) scaleY(0.4);
                opacity: 0;
            }
            15% { opacity: 0.8; }
            100% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 20px)), calc(var(--start-y, 0) + var(--end-y, -60px))) scaleX(0.3) scaleY(0.5);
                opacity: 0;
            }
        }

        /* Scatter - erratic zigzag movement */
        @keyframes scatterFloat {
            0% {
                transform: translate(var(--start-x, 0), var(--start-y, 0)) scale(0.3);
                opacity: 0;
            }
            10% { 
                opacity: 1;
                transform: translate(calc(var(--start-x, 0) + var(--scatter-x1, 5px)), calc(var(--start-y, 0) + var(--scatter-y1, -10px))) scale(0.8);
            }
            35% {
                transform: translate(calc(var(--start-x, 0) + var(--scatter-x2, -8px)), calc(var(--start-y, 0) + var(--scatter-y2, -25px))) scale(1);
            }
            60% {
                transform: translate(calc(var(--start-x, 0) + var(--scatter-x3, 10px)), calc(var(--start-y, 0) + var(--scatter-y3, -40px))) scale(0.7);
                opacity: 0.8;
            }
            100% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 15px)), calc(var(--start-y, 0) + var(--end-y, -55px))) scale(0.1);
                opacity: 0;
            }
        }

        /* Mingle - wobble toward others then drift */
        @keyframes mingleFloat {
            0% {
                transform: translate(var(--start-x, 0), var(--start-y, 0)) scale(0.4);
                opacity: 0;
            }
            12% { 
                opacity: 1;
            }
            30% {
                transform: translate(calc(var(--start-x, 0) + var(--mingle-x, -5px)), calc(var(--start-y, 0) + var(--mingle-y, -8px))) scale(1.2);
                opacity: 1;
            }
            55% {
                transform: translate(calc(var(--start-x, 0) + var(--mingle-x, -5px) * 0.3), calc(var(--start-y, 0) + var(--end-y, -30px) * 0.6)) scale(1.1);
                opacity: 0.9;
            }
            100% {
                transform: translate(calc(var(--start-x, 0) + var(--end-x, 10px)), calc(var(--start-y, 0) + var(--end-y, -50px))) scale(0.2);
                opacity: 0;
            }
        }

        @keyframes sunRaysSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Sun corona */
        .sun-corona {
            position: absolute;
            top: -40%;
            left: -40%;
            width: 180%;
            height: 180%;
            background: radial-gradient(circle, 
                rgba(255, 240, 150, 0.2) 0%,
                rgba(255, 200, 50, 0.1) 40%,
                transparent 70%);
            animation: coronaPulse 6s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes coronaPulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }

        /* ========== SAKURA PETALS ========== */
        .petal-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* ========== TREE SILHOUETTES ========== */
        .tree-silhouette {
            position: fixed;
            bottom: 0;
            right: -50px;
            width: 400px;
            height: 90vh;
            opacity: 0.15;
            z-index: 0;
            pointer-events: none;
            color: var(--petal-deep);
        }

        .tree-left {
            left: -100px;
            right: auto;
            transform: scaleX(-1);
        }

        /* ========== MAIN CONTENT ========== */
        .content {
            position: relative;
            z-index: 2;
            max-width: 1100px;
            margin: 0 auto;
            padding: 50px 30px;
            overflow-x: hidden;
        }

        /* Header */
        .hero-image-section {
            margin-bottom: 30px;
        }

        .hero-image-container {
            position: relative;
            width: 100%;
            max-width: 267px;
            margin: 0 auto;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4),
                        0 0 40px rgba(255, 183, 197, 0.1);
        }

        .hero-bg-img {
            width: 100%;
            height: auto;
            display: block;
            filter: brightness(0.9) contrast(1.1);
            animation: imageReconstruct 2s ease-out forwards;
        }

        .hero-kanji-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Noto Serif JP', serif;
            font-size: 12rem;
            font-weight: 200;
            color: var(--petal-pink);
            text-shadow: 
                0 0 80px rgba(255, 183, 197, 0.9),
                0 0 160px rgba(255, 183, 197, 0.6),
                0 0 240px rgba(255, 183, 197, 0.4),
                0 6px 12px rgba(0, 0, 0, 0.6);
            animation: kanjiGlow 4s ease-in-out infinite, kanjiReconstruct 2s ease-out forwards;
            z-index: 2;
            pointer-events: none;
        }

        @keyframes imageReconstruct {
            0% {
                filter: brightness(0.9) contrast(1.1) blur(15px) saturate(0);
                clip-path: inset(0 0 100% 0);
            }
            10% {
                clip-path: inset(0 0 80% 0);
                filter: brightness(1.2) contrast(1.5) blur(10px) saturate(0.3);
            }
            20% {
                clip-path: inset(0 0 60% 0);
                filter: brightness(0.8) contrast(1.3) blur(8px) saturate(0.5);
            }
            30% {
                clip-path: inset(0 0 40% 0);
                filter: brightness(1.1) contrast(1.2) blur(5px) saturate(0.7);
            }
            50% {
                clip-path: inset(0 0 20% 0);
                filter: brightness(0.95) contrast(1.15) blur(3px) saturate(0.85);
            }
            70% {
                clip-path: inset(0 0 5% 0);
                filter: brightness(0.92) contrast(1.12) blur(1px) saturate(0.95);
            }
            100% {
                clip-path: inset(0 0 0 0);
                filter: brightness(0.9) contrast(1.1) blur(0) saturate(1);
            }
        }

        @keyframes kanjiReconstruct {
            0% {
                opacity: 0;
                filter: blur(20px);
                transform: translate(-50%, -50%) scale(0.8);
                text-shadow: 
                    0 0 100px rgba(255, 183, 197, 1),
                    0 0 200px rgba(255, 183, 197, 0.8);
            }
            20% {
                opacity: 0.3;
                filter: blur(15px);
                transform: translate(-50%, -50%) scale(0.9) skewX(5deg);
            }
            40% {
                opacity: 0.5;
                filter: blur(10px);
                transform: translate(-50%, -50%) scale(0.95) skewX(-3deg);
            }
            60% {
                opacity: 0.7;
                filter: blur(5px);
                transform: translate(-50%, -50%) scale(0.98) skewX(1deg);
            }
            80% {
                opacity: 0.9;
                filter: blur(2px);
                transform: translate(-50%, -50%) scale(0.99);
            }
            100% {
                opacity: 1;
                filter: blur(0);
                transform: translate(-50%, -50%) scale(1);
                text-shadow: 
                    0 0 80px rgba(255, 183, 197, 0.9),
                    0 0 160px rgba(255, 183, 197, 0.6),
                    0 0 240px rgba(255, 183, 197, 0.4),
                    0 6px 12px rgba(0, 0, 0, 0.6);
            }
        }

        @media (max-width: 768px) {
            .hero-kanji-overlay {
                font-size: 8rem;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1.5s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo-kanji {
            font-family: 'Noto Serif JP', serif;
            font-size: 4rem;
            font-weight: 200;
            color: var(--petal-pink);
            text-shadow: 
                0 0 60px rgba(255, 183, 197, 0.5),
                0 0 120px rgba(255, 183, 197, 0.3);
            letter-spacing: 0.3em;
            margin-bottom: 15px;
            animation: kanjiGlow 4s ease-in-out infinite;
        }

        @keyframes kanjiGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 60px rgba(255, 183, 197, 0.5),
                    0 0 120px rgba(255, 183, 197, 0.3);
            }
            50% { 
                text-shadow: 
                    0 0 80px rgba(255, 183, 197, 0.7),
                    0 0 160px rgba(255, 183, 197, 0.4);
            }
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 300;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--moon-glow), var(--petal-pink));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header .subtitle {
            font-size: 1.1rem;
            font-style: italic;
            color: var(--petal-soft);
            opacity: 0.8;
            letter-spacing: 0.2em;
        }

        .divider {
            width: 150px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--petal-pink), transparent);
            margin: 30px auto;
            transform: scaleX(0);
            animation: dividerExpand 1.5s ease-out 0.8s forwards, dividerPulse 3s ease-in-out 2.5s infinite;
        }

        @keyframes dividerExpand {
            0% {
                transform: scaleX(0);
            }
            100% {
                transform: scaleX(1);
            }
        }

        @keyframes dividerPulse {
            0%, 100% {
                opacity: 0.6;
                box-shadow: 0 0 0px transparent;
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 8px var(--petal-pink), 0 0 15px rgba(255, 183, 197, 0.3);
            }
        }

        /* Portfolio Grid */
        .portfolio-section {
            margin-bottom: 60px;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .section-title-jp {
            font-family: 'Noto Serif JP', serif;
            font-size: 2.2rem;
            font-weight: 400;
            letter-spacing: 0.15em;
            background: linear-gradient(135deg, 
                #ffb7c5 0%, 
                #ff9eb5 25%, 
                #ffd4dc 50%, 
                #ff9eb5 75%, 
                #ffb7c5 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 8px rgba(255, 183, 197, 0.6))
                    drop-shadow(0 0 20px rgba(255, 183, 197, 0.4))
                    drop-shadow(0 0 40px rgba(255, 183, 197, 0.2));
            animation: sakuraShimmer 4s ease-in-out infinite;
            position: relative;
        }

        .section-title-jp::before {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cpath fill='%23ffd4dc' fill-opacity='0.3' d='M30 5c2 8-3 12-3 12s8-2 12 3c-8 2-12-3-12-3s2 8-3 12c-2-8 3-12 3-12s-8 2-12-3c8-2 12 3 12 3s-2-8 3-12z'/%3E%3Cpath fill='%23ffb7c5' fill-opacity='0.2' d='M45 35c1 4-1.5 6-1.5 6s4-1 6 1.5c-4 1-6-1.5-6-1.5s1 4-1.5 6c-1-4 1.5-6 1.5-6s-4 1-6-1.5c4-1 6 1.5 6 1.5s-1-4 1.5-6z'/%3E%3Cpath fill='%23ffc4d0' fill-opacity='0.25' d='M12 42c1 4-1.5 6-1.5 6s4-1 6 1.5c-4 1-6-1.5-6-1.5s1 4-1.5 6c-1-4 1.5-6 1.5-6s-4 1-6-1.5c4-1 6 1.5 6 1.5s-1-4 1.5-6z'/%3E%3C/svg%3E") repeat;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.7;
            z-index: -1;
        }

        @keyframes sakuraShimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .section-title-en {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 300;
            color: var(--petal-soft);
            letter-spacing: 0.4em;
            text-transform: uppercase;
            opacity: 0.7;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .project-card-link {
            text-decoration: none;
            display: block;
        }

        .project-card {
            background: linear-gradient(145deg, rgba(255, 183, 197, 0.08), rgba(26, 26, 46, 0.6));
            border: 1px solid rgba(255, 183, 197, 0.15);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--petal-deep), var(--petal-pink), var(--petal-soft));
            opacity: 0;
            transition: opacity 0.4s;
        }

        .project-card:hover {
            transform: translateY(-6px);
            border-color: rgba(255, 183, 197, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3),
                        0 0 30px rgba(255, 183, 197, 0.1);
        }

        .project-card:hover::before {
            opacity: 1;
        }

        .project-card h3 {
            font-size: 1.3rem;
            font-weight: 400;
            margin-bottom: 10px;
            color: var(--moon-glow);
        }

        .project-card p {
            font-size: 0.95rem;
            line-height: 1.6;
            color: rgba(248, 240, 227, 0.7);
        }

        .project-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .tag {
            font-size: 0.75rem;
            padding: 4px 12px;
            background: rgba(255, 183, 197, 0.1);
            border: 1px solid rgba(255, 183, 197, 0.2);
            border-radius: 15px;
            color: var(--petal-soft);
            letter-spacing: 0.05em;
        }

        /* GitHub Stats Section */
        .stats-section {
            margin: 80px 0 60px;
        }

        .github-stats-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            justify-items: center;
        }

        .github-stats-container.compact {
            gap: 20px;
        }

        /* Combined Stats Card */
        .combined-stat-card {
            width: 100%;
            max-width: 100%;
            grid-column: 1 / -1;
        }

        .combined-stat-content {
            display: flex;
            width: 100%;
            gap: 0;
        }

        .stat-half {
            flex: 1;
            padding: 0 20px;
        }

        .stat-half:first-child {
            padding-left: 0;
        }

        .stat-half:last-child {
            padding-right: 0;
        }

        .stat-divider {
            width: 1px;
            background: linear-gradient(180deg, transparent, rgba(255, 183, 197, 0.3), transparent);
            margin: 0 10px;
        }

        /* Vibrating/Buzzing Effect */
        .stat-value.vibrate {
            position: relative;
            display: inline-block;
            padding: 8px 15px;
            background: rgba(255, 183, 197, 0.1);
            border: 1px solid rgba(255, 183, 197, 0.25);
            border-radius: 10px;
            animation: subtlePulse 2s ease-in-out infinite;
            box-shadow: 0 0 15px rgba(255, 183, 197, 0.15);
        }

        @keyframes subtlePulse {
            0%, 100% {
                box-shadow: 0 0 10px rgba(255, 183, 197, 0.15);
                border-color: rgba(255, 183, 197, 0.25);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 183, 197, 0.3), 0 0 30px rgba(255, 183, 197, 0.1);
                border-color: rgba(255, 183, 197, 0.4);
            }
        }

        .stat-value.vibrate::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 12px;
            background: linear-gradient(45deg, transparent, rgba(255, 183, 197, 0.1), transparent);
            animation: shimmer 3s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        .stats-card {
            background: linear-gradient(145deg, rgba(255, 183, 197, 0.06), rgba(26, 26, 46, 0.5));
            border: 1px solid rgba(255, 183, 197, 0.12);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        .stats-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 183, 197, 0.25);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(255, 183, 197, 0.08);
        }

        .stats-card img {
            max-width: 100%;
            height: auto;
        }

        .stats-card.full-width {
            grid-column: 1 / -1;
        }

        .snake-card {
            padding: 15px;
            background: linear-gradient(145deg, rgba(255, 183, 197, 0.04), rgba(26, 26, 46, 0.6));
        }

        .snake-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            /* iOS performance optimization */
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .snake-card img {
            width: 100%;
            max-width: 700px;
            display: block;
            margin: 0 auto;
            /* iOS SVG rendering optimization */
            -webkit-transform: translate3d(0, 0, 0);
            transform: translate3d(0, 0, 0);
            will-change: transform;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        /* iOS-specific fixes for SVG animations */
        @supports (-webkit-touch-callout: none) {
            .snake-card img {
                image-rendering: -webkit-optimize-contrast;
            }
        }

        .snake-setup {
            text-align: center;
            padding: 30px;
            color: var(--petal-soft);
        }

        .snake-setup p {
            margin: 8px 0;
            font-size: 1.1rem;
        }

        .snake-setup .small {
            font-size: 0.9rem;
            opacity: 0.6;
        }

        /* Expand Stars Button */
        .expand-stars-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            margin-top: 20px;
            padding: 12px 20px;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.25);
            border-radius: 10px;
            color: var(--gold-accent);
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .expand-stars-btn:hover {
            background: rgba(212, 175, 55, 0.2);
            border-color: rgba(212, 175, 55, 0.4);
        }

        .expand-stars-btn.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .expand-activity-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            margin-top: 15px;
            padding: 10px 20px;
            background: rgba(255, 183, 197, 0.1);
            border: 1px solid rgba(255, 183, 197, 0.25);
            border-radius: 10px;
            color: var(--petal-pink);
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .expand-activity-btn:hover {
            background: rgba(255, 183, 197, 0.2);
            border-color: rgba(255, 183, 197, 0.4);
        }

        .expand-activity-btn.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .expand-icon {
            transition: transform 0.3s ease;
        }

        .star-item.hidden {
            display: none;
        }

        .star-item.show {
            display: flex;
            animation: fadeInStar 0.3s ease forwards;
        }

        @keyframes fadeInStar {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-fallback {
            text-align: center;
            padding: 30px 20px;
            color: var(--petal-soft);
        }

        .stat-fallback .stat-icon {
            font-size: 2.5rem;
            display: block;
            margin-bottom: 12px;
        }

        .stat-fallback p {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--moon-glow);
        }

        .stat-fallback a {
            color: var(--petal-pink);
            text-decoration: none;
            font-size: 0.9rem;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .stat-fallback a:hover {
            opacity: 1;
        }

        /* Custom Stats Cards */
        .custom-stat {
            min-width: 260px;
        }

        .custom-stat-content {
            width: 100%;
        }

        .custom-stat-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 18px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 183, 197, 0.15);
        }

        .custom-stat-header .stat-icon {
            font-size: 1.4rem;
        }

        .custom-stat-header h3 {
            font-size: 1.1rem;
            font-weight: 400;
            color: var(--petal-pink);
            margin: 0;
            flex: 1;
        }

        .lang-mode-toggle {
            background: rgba(255, 183, 197, 0.1);
            border: 1px solid rgba(255, 183, 197, 0.2);
            border-radius: 8px;
            padding: 6px 12px;
            color: var(--petal-pink);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: auto;
            margin-right: 36px; /* Space for the arrow link badge */
        }

        .lang-mode-toggle:hover {
            background: rgba(255, 183, 197, 0.15);
            border-color: rgba(255, 183, 197, 0.3);
            transform: translateY(-1px);
        }

        .lang-mode-toggle .mode-text {
            font-weight: 500;
        }

        .custom-stat-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .custom-stat-item {
            text-align: center;
        }

        .custom-stat-item .stat-value {
            display: block;
            font-size: 1.6rem;
            font-weight: 300;
            color: var(--moon-glow);
            margin-bottom: 3px;
        }

        .custom-stat-item .stat-label {
            font-size: 0.75rem;
            color: var(--petal-soft);
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Cross Grid Layout for Stats */
        .stats-cross-grid {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .stats-cross-row {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
        }

        .cross-stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            text-align: center;
        }

        .stat-label-top {
            font-size: 0.7rem;
            color: var(--petal-soft);
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 8px;
        }

        .stat-label-bottom {
            font-size: 0.7rem;
            color: var(--petal-soft);
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: 8px;
        }

        .cross-divider-horizontal {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 183, 197, 0.4), transparent);
        }

        .cross-divider-vertical {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(180deg, transparent, rgba(255, 183, 197, 0.4), transparent);
            transform: translateX(-50%);
        }

        /* Language Bars */
        .language-bars {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .lang-loading {
            color: var(--petal-soft);
            opacity: 0.6;
            font-style: italic;
            font-size: 0.9rem;
        }

        .lang-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
            transition: all 0.3s ease;
        }

        .lang-item.hidden {
            display: none;
        }

        .lang-item.expandable {
            cursor: pointer;
        }

        .lang-item.expandable:hover .lang-name {
            color: var(--petal-pink);
        }

        .lang-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .lang-name {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--moon-glow);
            font-size: 0.85rem;
            transition: color 0.2s ease;
        }

        .lang-expand-icon {
            font-size: 0.7rem;
            transition: transform 0.3s ease;
            opacity: 0.6;
        }

        .lang-item.expanded .lang-expand-icon {
            transform: rotate(90deg);
        }

        .lang-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .lang-percent {
            color: var(--petal-soft);
            font-size: 0.75rem;
            opacity: 0.8;
        }

        .lang-bar-bg {
            height: 6px;
            background: rgba(255, 183, 197, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .lang-bar-fill {
            height: 100%;
            border-radius: 3px;
            transition: width 1s ease-out;
        }

        /* Language sub-details */
        .lang-details {
            display: none;
            margin-left: 14px;
            margin-top: 8px;
            padding: 10px;
            background: rgba(139, 90, 139, 0.1);
            border-radius: 8px;
            border-left: 2px solid var(--petal-pink);
        }

        .lang-item.expanded .lang-details {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lang-stats {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            font-size: 0.75rem;
        }

        .lang-stat {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--moon-glow);
        }

        .lang-stat-value {
            color: var(--petal-pink);
            font-weight: 600;
        }

        .lang-commits {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .lang-commits-title {
            font-size: 0.7rem;
            color: var(--petal-soft);
            opacity: 0.8;
            margin-bottom: 2px;
        }

        .lang-commit-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 4px;
            font-size: 0.7rem;
            transition: background 0.2s ease;
        }

        .lang-commit-item:hover {
            background: rgba(255, 183, 197, 0.1);
        }

        .commit-icon {
            color: var(--petal-pink);
            font-size: 0.65rem;
            margin-top: 2px;
        }

        .commit-info {
            flex: 1;
            min-width: 0;
        }

        .commit-msg {
            color: var(--moon-glow);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .commit-meta {
            display: flex;
            gap: 8px;
            color: var(--petal-soft);
            opacity: 0.7;
            font-size: 0.65rem;
            margin-top: 2px;
        }

        .commit-repo {
            color: var(--petal-pink);
        }

        /* Expand languages button */
        .lang-expand-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            margin-top: 10px;
            padding: 8px 16px;
            background: rgba(255, 183, 197, 0.1);
            border: 1px solid rgba(255, 183, 197, 0.2);
            border-radius: 20px;
            color: var(--petal-pink);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lang-expand-btn:hover {
            background: rgba(255, 183, 197, 0.2);
            transform: translateY(-2px);
        }

        .lang-expand-btn .arrow {
            transition: transform 0.3s ease;
        }

        .lang-expand-btn.expanded .arrow {
            transform: rotate(180deg);
        }

        /* Clickable Link Badge */
        .stat-link-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 28px;
            height: 28px;
            background: rgba(255, 183, 197, 0.15);
            border: 1px solid rgba(255, 183, 197, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--petal-pink);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            z-index: 5;
        }

        .stat-link-badge:hover {
            background: rgba(255, 183, 197, 0.3);
            border-color: var(--petal-pink);
            transform: translate(2px, -2px);
            box-shadow: 0 4px 12px rgba(255, 183, 197, 0.2);
        }

        .stats-card {
            position: relative;
        }

        /* Activity Section */
        .activity-section {
            margin: 60px 0;
        }

        .activity-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .activity-container.compact {
            gap: 20px;
        }

        .activity-card {
            background: linear-gradient(145deg, rgba(255, 183, 197, 0.06), rgba(26, 26, 46, 0.5));
            border: 1px solid rgba(255, 183, 197, 0.12);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            position: relative;
        }

        .activity-card:hover {
            transform: translateY(-4px);
            border-color: rgba(255, 183, 197, 0.25);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(255, 183, 197, 0.08);
        }

        .activity-card.full-width {
            grid-column: 1 / -1;
        }

        /* Activity Chart */
        .activity-chart-card {
            display: flex;
            flex-direction: column;
        }

        .activity-chart-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex: 1;
            min-height: 220px;
        }

        #activityChart {
            max-width: 100%;
        }

        /* Activity Feed */
        .activity-feed {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .activity-feed::-webkit-scrollbar {
            width: 5px;
        }

        .activity-feed::-webkit-scrollbar-track {
            background: rgba(255, 183, 197, 0.05);
            border-radius: 3px;
        }

        .activity-feed::-webkit-scrollbar-thumb {
            background: rgba(255, 183, 197, 0.2);
            border-radius: 3px;
        }

        .activity-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 183, 197, 0.05);
            border-radius: 8px;
            border-left: 2px solid var(--petal-pink);
            transition: opacity 0.3s, transform 0.3s;
        }

        .activity-item.hidden {
            display: none;
        }

        .activity-item.show {
            animation: fadeIn 0.3s ease forwards;
        }

        .activity-item .activity-icon {
            font-size: 1rem;
            flex-shrink: 0;
        }

        .activity-item .activity-content {
            flex: 1;
        }

        .activity-item .activity-text {
            color: var(--moon-glow);
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .activity-item .activity-text a {
            color: var(--petal-pink);
            text-decoration: none;
        }

        .activity-item .activity-text a:hover {
            text-decoration: underline;
        }

        .activity-item .activity-time {
            color: var(--petal-soft);
            opacity: 0.5;
            font-size: 0.75rem;
            margin-top: 3px;
        }

        /* Gilded Section */
        .gilded-section {
            margin: 60px 0;
            overflow: hidden;
        }

        .gilded-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .gilded-card {
            background: linear-gradient(145deg, rgba(212, 175, 55, 0.06), rgba(26, 26, 46, 0.5));
            border: 1px solid rgba(212, 175, 55, 0.15);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .gilded-card:hover {
            transform: translateY(-4px);
            border-color: rgba(212, 175, 55, 0.3);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2),
                        0 0 20px rgba(212, 175, 55, 0.08);
        }

        .gilded-card .custom-stat-header h3 {
            color: var(--gold-accent);
        }

        .gilded-card .stat-link-badge {
            background: rgba(212, 175, 55, 0.15);
            border-color: rgba(212, 175, 55, 0.3);
            color: var(--gold-accent);
        }

        .gilded-card .stat-link-badge:hover {
            background: rgba(212, 175, 55, 0.3);
            border-color: var(--gold-accent);
        }

        /* Recent Stars Grid */
        .recent-stars-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        @media (max-width: 900px) {
            .recent-stars-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .recent-stars-grid {
                grid-template-columns: 1fr;
            }
            
            .star-item {
                max-width: 100%;
            }
            
            .star-item > div {
                min-width: 0;
                overflow: hidden;
            }
        }

        .star-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 12px;
            background: rgba(212, 175, 55, 0.05);
            border-radius: 10px;
            transition: background 0.3s;
            overflow: hidden;
            min-width: 0;
        }

        .star-item:hover {
            background: rgba(212, 175, 55, 0.1);
        }

        .star-item a {
            color: var(--gold-accent);
            text-decoration: none;
            font-weight: 400;
            font-size: 0.9rem;
            transition: color 0.3s;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .star-item a:hover {
            color: #f1c40f;
        }

        .star-item .star-desc {
            color: var(--moon-glow);
            opacity: 0.6;
            font-size: 0.8rem;
            margin-top: 3px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            word-break: break-word;
        }

        .star-item .star-timestamp {
            color: var(--petal-pink);
            opacity: 0.5;
            font-size: 0.7rem;
            margin-top: 4px;
            font-style: italic;
        }

        .star-icon {
            color: #f1c40f;
            font-size: 0.9rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        @media (max-width: 900px) {
            .github-stats-container {
                grid-template-columns: 1fr;
            }
            
            .stats-card.full-width,
            .stats-card.full-width-third {
                grid-column: auto;
            }

            .custom-stat-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .custom-stat-item .stat-value {
                font-size: 1.4rem;
            }

            .activity-container {
                grid-template-columns: 1fr;
            }

            .activity-card.full-width {
                grid-column: auto;
            }

            .recent-stars-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .combined-stat-content {
                flex-direction: column;
            }

            .stat-divider {
                width: 100%;
                height: 1px;
                margin: 20px 0;
            }

            .stat-half {
                padding: 0;
            }
            
            .gilded-card {
                padding: 15px;
            }
            
            .star-item a {
                font-size: 0.8rem;
            }
        }

        /* Poetry Section */
        .poetry-section {
            margin: 60px 0;
            position: relative;
        }

        .poetry-container {
            position: relative;
            perspective: 1000px;
            cursor: pointer;
            margin-bottom: 40px;
            width: 100%;
        }

        .poetry-flip-inner {
            position: relative;
            width: 100%;
            transition: transform 0.8s, height 0.8s ease;
            transform-style: preserve-3d;
        }

        .poetry-container.flipped .poetry-flip-inner {
            transform: rotateY(180deg);
        }

        .poetry-flip-front,
        .poetry-flip-back {
            background: linear-gradient(145deg, rgba(255, 183, 197, 0.05), rgba(26, 26, 46, 0.8));
            border: 1px solid rgba(255, 183, 197, 0.1);
            border-radius: 20px;
            padding: 50px;
            width: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            overflow: hidden;
            min-height: 400px;
        }

        .poetry-flip-front {
            position: relative;
        }

        .poetry-flip-back {
            position: absolute;
            top: 0;
            left: 0;
            transform: rotateY(180deg);
        }

        /* Ensure text content is properly layered */
        .poetry-text {
            position: relative;
            z-index: 2;
        }

        .poetry-container::before,
        .poetry-container::after {
            content: '';
            display: none;
        }

        /* Diagonal sakura petal animation behind poem text */
        .diagonal-petal {
            position: absolute;
            font-size: 1.5rem;
            color: rgba(255, 183, 197, 0.4);
            pointer-events: none;
            animation: diagonalFloat linear infinite;
            z-index: 0;
        }

        @keyframes diagonalFloat {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translate(-150vw, 150vh) rotate(720deg);
                opacity: 0;
            }
        }

        .poetry-flip-front::before,
        .poetry-flip-front::after,
        .poetry-flip-back::before,
        .poetry-flip-back::after {
            content: 'æ¡œ';
            font-family: 'Noto Serif JP', serif;
            font-size: 12rem;
            position: absolute;
            color: rgba(255, 183, 197, 0.03);
            pointer-events: none;
        }

        .poetry-flip-front::before,
        .poetry-flip-back::before {
            top: -40px;
            left: -20px;
        }

        .poetry-flip-front::after,
        .poetry-flip-back::after {
            bottom: -60px;
            right: -20px;
        }

        .poetry-text {
            font-size: 1.15rem;
            line-height: 2;
            text-align: center;
            color: var(--moon-glow);
            font-style: italic;
            position: relative;
            z-index: 1;
        }

        .poetry-text p {
            margin-bottom: 0.3em;
            opacity: 0;
            animation: fadeInPoem 1s ease-out forwards;
        }

        @keyframes fadeInPoem {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Haiku Section */
        .haiku-container {
            margin-top: 80px;
            margin-bottom: 40px;
            padding: 40px;
            background: linear-gradient(165deg, rgba(255, 183, 197, 0.05), rgba(26, 26, 46, 0.7));
            border: 1px solid rgba(255, 183, 197, 0.1);
            border-radius: 15px;
            position: relative;
            text-align: center;
            overflow: hidden;
        }

        .haiku-text {
            display: inline-block;
            position: relative;
        }

        .haiku-text p {
            font-size: 1.3rem;
            font-weight: 300;
            line-height: 2;
            color: var(--petal-pink);
            letter-spacing: 0.15em;
            margin-bottom: 0.2em;
            text-shadow: 0 0 30px rgba(255, 183, 197, 0.4);
            opacity: 0;
            animation: fadeInHaiku 1.2s ease-out forwards;
        }

        .haiku-text p:nth-child(1) { animation-delay: 0.5s; }
        .haiku-text p:nth-child(2) { animation-delay: 1s; }
        .haiku-text p:nth-child(3) { animation-delay: 1.5s; }

        @keyframes fadeInHaiku {
            from {
                opacity: 0;
                transform: translateY(15px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .haiku-symbol {
            display: block;
            font-family: 'Noto Serif JP', serif;
            font-size: 0.95rem;
            font-weight: 200;
            color: rgba(255, 183, 197, 0.3);
            margin-top: 20px;
            letter-spacing: 0.5em;
            opacity: 0;
            animation: fadeInHaiku 1s ease-out 2s forwards;
        }

        .haiku-container::before,
        .haiku-container::after {
            content: 'âœ¿';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            color: rgba(255, 183, 197, 0.2);
            opacity: 0;
            animation: fadeInHaiku 1s ease-out 2.2s forwards;
        }

        .haiku-container::before {
            left: 25%;
        }

        .haiku-container::after {
            right: 25%;
        }

        /* Aesthetic Memories Section */
        .aesthetic-memories-section {
            margin: 80px 0 60px;
        }

        .video-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto 40px auto;
            padding: 20px;
            padding-bottom: calc(56.25% + 40px); /* 16:9 aspect ratio + padding */
            border-radius: 15px;
            overflow: visible;
            cursor: pointer;
            /* Candy cane diagonal stripe pattern */
            background: 
                repeating-linear-gradient(
                    45deg,
                    rgba(255, 183, 197, 0.3) 0px,
                    rgba(255, 183, 197, 0.3) 10px,
                    rgba(255, 105, 180, 0.2) 10px,
                    rgba(255, 105, 180, 0.2) 20px,
                    rgba(255, 183, 197, 0.4) 20px,
                    rgba(255, 183, 197, 0.4) 30px,
                    rgba(232, 145, 160, 0.25) 30px,
                    rgba(232, 145, 160, 0.25) 40px
                );
            transition: transform 0.2s ease;
        }

        .video-container:hover {
            transform: scale(1.02);
        }

        /* Sakura petal frame decorations with candy cane glow */
        .video-container::before,
        .video-container::after {
            content: 'ðŸŒ¸';
            position: absolute;
            font-size: 2rem;
            opacity: 0.8;
            animation: petalGlow 3s ease-in-out infinite;
            z-index: 10;
            filter: drop-shadow(0 0 8px rgba(255, 183, 197, 0.6));
            pointer-events: none;
        }

        .video-container::before {
            top: -10px;
            left: -10px;
        }

        .video-container::after {
            bottom: -10px;
            right: -10px;
        }

        @keyframes petalGlow {
            0%, 100% {
                opacity: 0.6;
                transform: scale(1) rotate(0deg);
            }
            50% {
                opacity: 0.9;
                transform: scale(1.1) rotate(10deg);
            }
        }

        /* Inner video wrapper for proper iframe positioning */
        .video-wrapper {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4),
                        0 0 30px rgba(255, 183, 197, 0.1);
        }

        @media (min-width: 1200px) {
            .video-container {
                max-width: 1000px;
            }
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 15px;
        }

        /* ========== SAKURACRAFT GAME SECTION ========== */
        .game-section {
            margin: 80px 0;
            position: relative;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        /* Game Info Card */
        .game-info {
            background: linear-gradient(145deg, rgba(255, 183, 197, 0.1), rgba(26, 26, 46, 0.8));
            border: 1px solid rgba(255, 183, 197, 0.2);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .game-info:hover {
            transform: translateY(-5px);
        }

        .game-info h3 {
            font-size: 2rem;
            color: var(--petal-pink);
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(255, 183, 197, 0.5);
        }

        .game-info p {
            font-size: 1.1rem;
            color: var(--moon-glow);
            opacity: 0.8;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .game-launch-btn {
            background: linear-gradient(135deg, var(--petal-pink), var(--petal-deep));
            border: none;
            border-radius: 12px;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 500;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 183, 197, 0.3);
            letter-spacing: 0.05em;
        }

        .game-launch-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 183, 197, 0.5);
        }

        .game-launch-btn:active {
            transform: translateY(0);
        }

        /* Game Iframe Wrapper (Full Screen Overlay) */
        .game-iframe-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .game-iframe-wrapper iframe {
            width: 90%;
            height: 90%;
            max-width: 1400px;
            max-height: 900px;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .game-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 183, 197, 0.2);
            border: 2px solid var(--petal-pink);
            border-radius: 50%;
            color: var(--petal-pink);
            font-size: 24px;
            line-height: 1;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-close-btn:hover {
            background: rgba(255, 183, 197, 0.4);
            transform: scale(1.1) rotate(90deg);
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .game-info {
                padding: 30px 20px;
            }

            .game-info h3 {
                font-size: 1.6rem;
            }

            .game-info p {
                font-size: 1rem;
            }

            .game-launch-btn {
                padding: 12px 30px;
                font-size: 1rem;
            }

            .game-iframe-wrapper iframe {
                width: 95%;
                height: 85%;
            }
            
            .game-close-btn {
                width: 40px;
                height: 40px;
                font-size: 20px;
                top: 10px;
                right: 10px;
            }
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 50px 40px;
            border-top: 1px solid rgba(255, 183, 197, 0.1);
            margin-top: 60px;
        }

        .footer p {
            font-size: 0.9rem;
            color: rgba(248, 240, 227, 0.5);
            letter-spacing: 0.15em;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 20px;
        }

        .social-links a {
            color: var(--petal-soft);
            text-decoration: none;
            font-size: 1rem;
            transition: color 0.3s, transform 0.3s;
            opacity: 0.7;
        }

        .social-links a:hover {
            color: var(--petal-pink);
            transform: translateY(-3px);
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .content {
                padding: 30px 15px;
            }

            .section-title-jp {
                font-size: 1.6rem;
                /* Disable flickering on mobile */
                animation: none;
                filter: none;
                -webkit-filter: none;
                background-size: 100% 100%;
            }
            
            .section-title-jp::before {
                display: none;
            }

            .section-title-en {
                font-size: 0.9rem;
                letter-spacing: 0.3em;
            }

            .logo-kanji {
                font-size: 2.5rem;
            }

            .header h1 {
                font-size: 1.6rem;
                letter-spacing: 0.15em;
            }

            .poetry-container {
                padding: 30px 20px;
                margin-bottom: 30px;
            }

            .poetry-flip-front,
            .poetry-flip-back {
                padding: 30px 20px;
                min-height: 350px;
            }

            .poetry-text {
                font-size: 0.95rem;
                line-height: 1.8;
            }

            .haiku-container {
                margin-top: 60px;
                margin-bottom: 30px;
                padding: 30px 20px;
            }

            .haiku-text p {
                font-size: 1.1rem;
            }

            .haiku-container::before,
            .haiku-container::after {
                display: none;
            }

            .step {
                flex-direction: column;
                gap: 10px;
            }

            .stats-preview {
                grid-template-columns: 1fr;
            }

            .tree-silhouette {
                display: none;
            }

            .celestial {
                width: 50px;
                height: 50px;
                top: 30px;
                right: 10%;
            }

            .moon-body::before {
                width: 10px;
                height: 10px;
            }

            .moon-body::after {
                width: 14px;
                height: 14px;
            }

            .moon-crater-small {
                width: 6px;
                height: 6px;
            }

            .sun-ray {
                width: 2px;
            }

            .kris-blade {
                width: 10px;
                height: 32px;
                margin-left: -5px;
            }

            .kris-blade svg {
                shape-rendering: optimizeSpeed;
            }

            .flame-particle {
                transform: scale(0.7);
            }
        }
    </style>
</head>
<body>
    <!-- Celestial Body (Moon/Sun based on time) -->
    <div class="celestial" id="celestialBody"></div>

    <!-- Animated Clouds -->
    <div class="cloud-container">
        <div class="cloud-layer-1" id="cloudLayer1"></div>
        <div class="cloud-layer-2" id="cloudLayer2"></div>
        <div class="cloud-layer-3" id="cloudLayer3"></div>
        <div class="wisp-layer" id="wispLayer"></div>
    </div>

    <!-- Falling Petals -->
    <canvas class="petal-canvas" id="petalCanvas"></canvas>

    <!-- Tree Silhouettes -->
    <svg class="tree-silhouette" viewBox="0 0 200 500" fill="currentColor">
        <path d="M100,500 L100,300 Q80,280 60,260 Q40,240 50,200 Q30,180 40,140 Q20,120 35,80 Q25,50 50,30 Q40,10 70,5 Q90,0 110,10 Q140,5 155,30 Q175,20 170,60 Q190,80 175,110 Q195,140 175,170 Q190,200 170,230 Q185,260 160,280 Q140,300 100,300 L100,500" opacity="0.3"/>
        <ellipse cx="100" cy="100" rx="90" ry="70" opacity="0.2"/>
        <ellipse cx="60" cy="150" rx="50" ry="40" opacity="0.15"/>
        <ellipse cx="140" cy="140" rx="55" ry="45" opacity="0.15"/>
        <ellipse cx="100" cy="60" rx="60" ry="45" opacity="0.18"/>
    </svg>

    <svg class="tree-silhouette tree-left" viewBox="0 0 200 500" fill="currentColor">
        <path d="M100,500 L100,320 Q75,300 55,270 Q35,250 45,210 Q25,190 40,150 Q25,120 45,90 Q35,60 60,40 Q55,20 80,15 Q100,5 120,15 Q145,10 155,40 Q175,35 170,70 Q185,100 170,130 Q190,160 170,190 Q185,220 165,250 Q180,280 155,300 Q130,320 100,320 L100,500" opacity="0.3"/>
        <ellipse cx="100" cy="110" rx="85" ry="65" opacity="0.2"/>
        <ellipse cx="55" cy="160" rx="45" ry="35" opacity="0.15"/>
        <ellipse cx="145" cy="150" rx="50" ry="40" opacity="0.15"/>
    </svg>

    <!-- Main Content -->
    <div class="content">

        <!-- SakuraCraft Game Section -->
        <section class="game-section" id="sakuracraft-section">
            <h2 class="section-title">
                <span class="section-title-jp" data-text="ã‚²ãƒ¼ãƒ ">ã‚²ãƒ¼ãƒ </span>
                <span class="section-title-en">SakuraCraft</span>
            </h2>
            
            <div class="game-container">
                <div class="game-info">
                    <h3>ðŸŒ¸ SakuraCraft ðŸŒ¸</h3>
                    <p>A peaceful building experience in a sakura-themed world</p>
                    <button class="game-launch-btn" onclick="launchSakuraCraft()">Launch Game</button>
                </div>
                
                <!-- Game iframe (hidden until launched) -->
                <div class="game-iframe-wrapper" id="sakuracraft-wrapper" style="display: none;">
                    <button class="game-close-btn" onclick="closeSakuraCraft()">âœ• Close</button>
                    <iframe 
                        id="sakuracraft-iframe"
                        src=""
                        title="SakuraCraft Game"
                        sandbox="allow-scripts allow-same-origin allow-pointer-lock allow-popups"
                        allow="fullscreen; gamepad"
                        loading="lazy"
                        style="width: 100%; height: 100%; border: none;">
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Aesthetic Memories Section -->
        <section class="aesthetic-memories-section">
            <h2 class="section-title">
                <span class="section-title-jp" data-text="ç¾Žçš„ãªæ€ã„å‡º">ç¾Žçš„ãªæ€ã„å‡º</span>
                <span class="section-title-en">Aesthetic Memories</span>
            </h2>
            <div class="video-container" data-video-id="10TOhu3uhUU">
                <div class="video-wrapper">
                    <iframe 
                        src="https://www.youtube.com/embed/10TOhu3uhUU" 
                        title="Aesthetic Memories"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
            <div class="video-container" data-video-id="eonNGjxNRco">
                <div class="video-wrapper">
                    <iframe 
                        src="https://www.youtube.com/embed/eonNGjxNRco" 
                        title="Wilsie"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
            <div class="video-container" data-video-id="tgcdZ2iz53Y">
                <div class="video-wrapper">
                    <iframe 
                        src="https://www.youtube.com/embed/tgcdZ2iz53Y" 
                        title="Letchworth"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                        allowfullscreen>
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Crafted with æ¡œ spirit</p>
            <div class="social-links">
                <a href="https://github.com/geket" target="_blank" rel="noopener noreferrer">GitHub</a>
                <a href="#">LinkedIn</a>
                <a href="#">Twitter</a>
            </div>
        </footer>
    </div>

    <script>
        // ========== CLOUD ANIMATION ==========
        function createCloud(layer, config) {
            const cloud = document.createElement('div');
            cloud.className = 'cloud';
            
            const width = config.minWidth + Math.random() * (config.maxWidth - config.minWidth);
            const height = width * (0.3 + Math.random() * 0.4);
            const top = config.minTop + Math.random() * (config.maxTop - config.minTop);
            const duration = config.minDuration + Math.random() * (config.maxDuration - config.minDuration);
            const delay = Math.random() * config.maxDelay;
            
            cloud.style.width = width + 'px';
            cloud.style.height = height + 'px';
            cloud.style.top = top + '%';
            cloud.style.animationDuration = duration + 's';
            cloud.style.animationDelay = delay + 's';
            
            layer.appendChild(cloud);
            
            // Remove and recreate after animation
            setTimeout(() => {
                cloud.remove();
                createCloud(layer, config);
            }, (duration + delay) * 1000);
        }

        function createWisp(layer) {
            const wisp = document.createElement('div');
            wisp.className = 'cloud-wisp';
            
            const width = 100 + Math.random() * 300;
            const top = 5 + Math.random() * 40;
            const duration = 40 + Math.random() * 60;
            const delay = Math.random() * 30;
            
            wisp.style.width = width + 'px';
            wisp.style.top = top + '%';
            wisp.style.animationDuration = duration + 's';
            wisp.style.animationDelay = delay + 's';
            
            layer.appendChild(wisp);
            
            setTimeout(() => {
                wisp.remove();
                createWisp(layer);
            }, (duration + delay) * 1000);
        }

        function initClouds() {
            const layer1 = document.getElementById('cloudLayer1');
            const layer2 = document.getElementById('cloudLayer2');
            const layer3 = document.getElementById('cloudLayer3');
            const wispLayer = document.getElementById('wispLayer');
            
            // Layer 1: Large, slow clouds (background)
            const config1 = {
                minWidth: 300, maxWidth: 600,
                minTop: 5, maxTop: 30,
                minDuration: 80, maxDuration: 120,
                maxDelay: 20
            };
            
            // Layer 2: Medium clouds
            const config2 = {
                minWidth: 200, maxWidth: 400,
                minTop: 10, maxTop: 40,
                minDuration: 60, maxDuration: 90,
                maxDelay: 15
            };
            
            // Layer 3: Smaller, faster clouds (foreground)
            const config3 = {
                minWidth: 100, maxWidth: 250,
                minTop: 15, maxTop: 50,
                minDuration: 45, maxDuration: 70,
                maxDelay: 10
            };
            
            // Create initial clouds
            for (let i = 0; i < 3; i++) createCloud(layer1, config1);
            for (let i = 0; i < 4; i++) createCloud(layer2, config2);
            for (let i = 0; i < 5; i++) createCloud(layer3, config3);
            
            // Create wisps
            for (let i = 0; i < 8; i++) createWisp(wispLayer);
        }

        // ========== CANVAS SAKURA PETAL PHYSICS ==========
        const petalCanvas = document.getElementById('petalCanvas');
        const ctx = petalCanvas.getContext('2d');
        
        // High-DPI support
        function resizeCanvas() {
            const dpr = window.devicePixelRatio || 1;
            petalCanvas.width = window.innerWidth * dpr;
            petalCanvas.height = window.innerHeight * dpr;
            petalCanvas.style.width = window.innerWidth + 'px';
            petalCanvas.style.height = window.innerHeight + 'px';
            ctx.scale(dpr, dpr);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Mouse tracking
        const mouse = { x: -1000, y: -1000 };
        document.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });
        document.addEventListener('mouseleave', () => {
            mouse.x = -1000;
            mouse.y = -1000;
        });
        // Touch support
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 0) {
                mouse.x = e.touches[0].clientX;
                mouse.y = e.touches[0].clientY;
            }
        });
        document.addEventListener('touchend', () => {
            mouse.x = -1000;
            mouse.y = -1000;
        });
        
        // Petal class with physics
        class Petal {
            constructor(x, y) {
                this.x = x ?? Math.random() * window.innerWidth;
                this.y = y ?? -20;
                this.size = 8 + Math.random() * 12;
                
                // Base velocity (what it returns to)
                this.baseVx = (Math.random() - 0.5) * 0.3;
                this.baseVy = 0.3 + Math.random() * 0.4; // Slower fall
                
                // Current velocity
                this.vx = this.baseVx;
                this.vy = this.baseVy;
                
                // Rotation (3D simulation)
                this.rotation = Math.random() * Math.PI * 2;
                this.rotationSpeed = (Math.random() - 0.5) * 0.04;
                this.baseRotationSpeed = this.rotationSpeed;
                this.tilt = Math.random() * Math.PI * 2;
                this.tiltSpeed = (Math.random() - 0.5) * 0.02;
                
                // Wobble (sine wave horizontal movement)
                this.wobblePhase = Math.random() * Math.PI * 2;
                this.wobbleSpeed = 0.015 + Math.random() * 0.015;
                this.wobbleAmp = 0.2 + Math.random() * 0.3;
                
                // Color variation
                const hue = 340 + Math.random() * 20; // Pink range
                const sat = 70 + Math.random() * 30;
                const light = 75 + Math.random() * 15;
                this.color = `hsla(${hue}, ${sat}%, ${light}%, 0.85)`;
                this.colorInner = `hsla(${hue}, ${sat - 10}%, ${light + 10}%, 0.9)`;
                
                // Opacity for fade in/out
                this.opacity = 0;
                this.fadeIn = true;
            }
            
            update() {
                // Gentle gravity
                this.vy += 0.001;
                this.vy = Math.min(this.vy, 1.2); // Lower terminal velocity
                
                // Wobble
                this.wobblePhase += this.wobbleSpeed;
                this.vx += Math.sin(this.wobblePhase) * this.wobbleAmp * 0.01;
                
                // Gradually return to base velocities (creates the "temporary nudge" effect)
                this.vx += (this.baseVx - this.vx) * 0.02;
                this.vy += (this.baseVy - this.vy) * 0.015;
                this.rotationSpeed += (this.baseRotationSpeed - this.rotationSpeed) * 0.03;
                
                // Mouse interaction - gentle nudge
                const dx = this.x - mouse.x;
                const dy = this.y - mouse.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                const interactRadius = 80;
                
                if (dist < interactRadius && dist > 0) {
                    const force = (interactRadius - dist) / interactRadius;
                    const angle = Math.atan2(dy, dx);
                    // Very gentle push - just a nudge
                    this.vx += Math.cos(angle) * force * 0.15;
                    this.vy += Math.sin(angle) * force * 0.1;
                    this.rotationSpeed += force * 0.01;
                }
                
                // Apply velocity
                this.x += this.vx;
                this.y += this.vy;
                
                // Rotation
                this.rotation += this.rotationSpeed;
                this.tilt += this.tiltSpeed;
                
                // Fade in
                if (this.fadeIn) {
                    this.opacity += 0.03;
                    if (this.opacity >= 1) {
                        this.opacity = 1;
                        this.fadeIn = false;
                    }
                }
                
                // Fade out near bottom
                if (this.y > window.innerHeight - 100) {
                    this.opacity -= 0.02;
                }
                
                // Wrap horizontally
                if (this.x < -50) this.x = window.innerWidth + 50;
                if (this.x > window.innerWidth + 50) this.x = -50;
                
                return this.y < window.innerHeight + 50 && this.opacity > 0;
            }
            
            draw(ctx) {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);
                
                // 3D tilt effect - scale based on tilt
                const scaleX = 0.5 + Math.abs(Math.cos(this.tilt)) * 0.5;
                const scaleY = 0.5 + Math.abs(Math.sin(this.tilt * 0.7)) * 0.5;
                ctx.scale(scaleX, scaleY);
                
                ctx.globalAlpha = this.opacity;
                
                // Draw petal shape (5-petal sakura)
                const s = this.size;
                
                // Main petal body
                ctx.beginPath();
                ctx.moveTo(0, -s * 0.3);
                ctx.bezierCurveTo(s * 0.5, -s * 0.5, s * 0.6, s * 0.2, 0, s * 0.5);
                ctx.bezierCurveTo(-s * 0.6, s * 0.2, -s * 0.5, -s * 0.5, 0, -s * 0.3);
                
                // Gradient fill
                const gradient = ctx.createRadialGradient(
                    -s * 0.2, -s * 0.2, 0,
                    0, 0, s * 0.7
                );
                gradient.addColorStop(0, this.colorInner);
                gradient.addColorStop(0.5, this.color);
                gradient.addColorStop(1, 'rgba(233, 145, 160, 0.6)');
                
                ctx.fillStyle = gradient;
                ctx.fill();
                
                // Subtle highlight
                ctx.beginPath();
                ctx.ellipse(-s * 0.15, -s * 0.1, s * 0.15, s * 0.1, -0.5, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.fill();
                
                // Second petal (rotated)
                ctx.rotate(Math.PI * 0.5 + Math.sin(this.tilt) * 0.3);
                ctx.globalAlpha = this.opacity * 0.6;
                
                ctx.beginPath();
                ctx.moveTo(0, -s * 0.25);
                ctx.bezierCurveTo(s * 0.4, -s * 0.4, s * 0.5, s * 0.15, 0, s * 0.4);
                ctx.bezierCurveTo(-s * 0.5, s * 0.15, -s * 0.4, -s * 0.4, 0, -s * 0.25);
                ctx.fillStyle = this.color;
                ctx.fill();
                
                ctx.restore();
            }
        }
        
        // Petal management
        const petals = [];
        const maxPetals = 80;
        
        function spawnPetal(x, y) {
            if (petals.length < maxPetals) {
                petals.push(new Petal(x, y));
            }
        }
        
        // Initial burst
        for (let i = 0; i < 50; i++) {
            const petal = new Petal();
            petal.y = Math.random() * window.innerHeight;
            petal.opacity = 0.5 + Math.random() * 0.5;
            petal.fadeIn = false;
            petals.push(petal);
        }
        
        // Continuous spawn
        let spawnTimer = 0;
        let gustTimer = 0;
        
        function animate() {
            ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
            
            // Spawn new petals
            spawnTimer++;
            if (spawnTimer > 15) { // Every ~250ms at 60fps
                spawnPetal();
                spawnTimer = 0;
            }
            
            // Occasional gust
            gustTimer++;
            if (gustTimer > 360) { // Every ~6 seconds
                const gustSize = 8 + Math.floor(Math.random() * 8);
                for (let i = 0; i < gustSize; i++) {
                    setTimeout(() => spawnPetal(), i * 50);
                }
                gustTimer = 0;
            }
            
            // Update and draw petals
            for (let i = petals.length - 1; i >= 0; i--) {
                if (!petals[i].update()) {
                    petals.splice(i, 1);
                } else {
                    petals[i].draw(ctx);
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();

        // ========== DIAGONAL SAKURA PETALS ==========
        function createDiagonalPetals() {
            const poetryContainers = document.querySelectorAll('.poetry-flip-front, .poetry-flip-back');
            
            poetryContainers.forEach(container => {
                // Create multiple diagonal petals
                for (let i = 0; i < 15; i++) {
                    const petal = document.createElement('div');
                    petal.className = 'diagonal-petal';
                    petal.textContent = 'ðŸŒ¸'; // Use cherry blossom emoji instead of kanji
                    
                    // Random starting position (top-right area)
                    const startX = 80 + Math.random() * 40; // 80-120% from left
                    const startY = -20 + Math.random() * 40; // -20% to 20% from top
                    
                    petal.style.left = `${startX}%`;
                    petal.style.top = `${startY}%`;
                    
                    // Random animation duration for variety
                    const duration = 15 + Math.random() * 10; // 15-25 seconds
                    petal.style.animationDuration = `${duration}s`;
                    
                    // Stagger the animation start
                    petal.style.animationDelay = `${Math.random() * 10}s`;
                    
                    // Random size variation
                    const scale = 0.7 + Math.random() * 0.6; // 0.7-1.3
                    petal.style.fontSize = `${scale * 1.5}rem`;
                    
                    container.appendChild(petal);
                }
            });
        }

        // ========== POETRY FLIP CARD HEIGHT MANAGEMENT ==========
        function initPoetryFlipCard() {
            const container = document.querySelector('.poetry-container');
            const flipInner = document.querySelector('.poetry-flip-inner');
            const frontSide = document.querySelector('.poetry-flip-front');
            const backSide = document.querySelector('.poetry-flip-back');
            
            if (!container || !flipInner || !frontSide || !backSide) return;
            
            // Function to set container height based on active side
            function updateContainerHeight() {
                const isFlipped = container.classList.contains('flipped');
                const activeSide = isFlipped ? backSide : frontSide;
                const height = activeSide.offsetHeight;
                
                // Set height with transition
                flipInner.style.height = height + 'px';
            }
            
            // Set initial height
            setTimeout(() => {
                updateContainerHeight();
            }, 100);
            
            // Update height on flip
            container.addEventListener('click', () => {
                setTimeout(() => {
                    updateContainerHeight();
                }, 50);
            });
            
            // Update on window resize
            window.addEventListener('resize', updateContainerHeight);
        }

        // ========== POETRY ANIMATION ==========
        function animatePoetry() {
            const lines = document.querySelectorAll('.poetry-text p');
            lines.forEach((line, index) => {
                line.style.animationDelay = `${index * 0.15}s`;
            });
        }

        // ========== PARALLAX EFFECT ==========
        // ========== MOON CLOUDS & SPARKLES ==========
        function createMoonClouds() {
            const cloudsContainer = document.getElementById('moonClouds');
            if (!cloudsContainer) return;
            
            // Create 4 drifting clouds
            for (let i = 0; i < 4; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'moon-cloud';
                
                // Random cloud size
                const width = 40 + Math.random() * 40; // 40-80px
                const height = width * (0.4 + Math.random() * 0.3); // Elliptical
                
                cloud.style.width = `${width}px`;
                cloud.style.height = `${height}px`;
                
                // Random vertical position
                const top = 20 + Math.random() * 60; // 20-80%
                cloud.style.top = `${top}%`;
                
                // Different animation duration for each cloud
                const duration = 15 + Math.random() * 10; // 15-25s
                cloud.style.animationDuration = `${duration}s`;
                
                // Stagger the start time
                cloud.style.animationDelay = `${i * 3}s`;
                
                cloudsContainer.appendChild(cloud);
            }
        }
        
        function createMoonSparkles() {
            const sparklesContainer = document.getElementById('moonSparkles');
            const cloudsContainer = document.getElementById('moonClouds');
            if (!sparklesContainer || !cloudsContainer) return;
            
            // Get cloud positions and create sparkles around them
            const clouds = cloudsContainer.querySelectorAll('.moon-cloud');
            
            // Create sparkles that follow cloud paths
            clouds.forEach((cloud, cloudIndex) => {
                // Create 3-4 sparkles per cloud
                const sparklesPerCloud = 3 + Math.floor(Math.random() * 2);
                
                for (let i = 0; i < sparklesPerCloud; i++) {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'moon-sparkle';
                    
                    // Position sparkles near the cloud's path
                    // Clouds drift horizontally, so sparkles should be scattered along that path
                    const cloudTop = parseFloat(cloud.style.top) || 50;
                    const horizontalSpread = Math.random() * 100; // Along the drift path
                    const verticalOffset = (Math.random() - 0.5) * 20; // Small vertical variance
                    
                    sparkle.style.left = `${horizontalSpread}%`;
                    sparkle.style.top = `${cloudTop + verticalOffset}%`;
                    
                    // Sync twinkle with cloud drift timing
                    const duration = 2 + Math.random() * 3;
                    sparkle.style.animationDuration = `${duration}s`;
                    
                    // Stagger based on cloud timing
                    sparkle.style.animationDelay = `${cloudIndex * 3 + Math.random() * 2}s`;
                    
                    // Random size variation
                    const size = 1.5 + Math.random() * 1;
                    sparkle.style.width = `${size}px`;
                    sparkle.style.height = `${size}px`;
                    
                    sparklesContainer.appendChild(sparkle);
                }
            });
            
            // Add a few ambient sparkles around the moon itself
            for (let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'moon-sparkle';
                
                // Closer to moon center
                const angle = (Math.random() * 360) * (Math.PI / 180);
                const distance = 40 + Math.random() * 30; // 40-70% from center
                const x = 50 + Math.cos(angle) * distance;
                const y = 50 + Math.sin(angle) * distance;
                
                sparkle.style.left = `${x}%`;
                sparkle.style.top = `${y}%`;
                
                const duration = 2 + Math.random() * 3;
                sparkle.style.animationDuration = `${duration}s`;
                sparkle.style.animationDelay = `${Math.random() * 3}s`;
                
                const size = 1.5 + Math.random() * 1;
                sparkle.style.width = `${size}px`;
                sparkle.style.height = `${size}px`;
                
                sparklesContainer.appendChild(sparkle);
            }
        }
        
        // ========== CELESTIAL BODY (SUN/MOON) ==========
        function initCelestialBody() {
            const celestial = document.getElementById('celestialBody');
            const hour = new Date().getHours();
            
            // Day: 6 AM to 6 PM, Night: 6 PM to 6 AM
            const isDay = hour >= 6 && hour < 18;
            
            if (isDay) {
                // Create sun structure with enhanced gooey flame filter
                celestial.innerHTML = `
                    <svg width="0" height="0" style="position:absolute">
                        <defs>
                            <!-- Enhanced gooey metaball effect - more blobby merging -->
                            <filter id="flameGooey" x="-50%" y="-50%" width="200%" height="200%">
                                <feGaussianBlur in="SourceGraphic" stdDeviation="3.5" result="blur"/>
                                <feColorMatrix in="blur" type="matrix" 
                                    values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 28 -12" result="gooey"/>
                                <feComposite in="SourceGraphic" in2="gooey" operator="atop"/>
                            </filter>
                            <!-- Blade wobble heat shimmer -->
                            <filter id="bladeWobble" x="-20%" y="-20%" width="140%" height="140%">
                                <feTurbulence type="turbulence" baseFrequency="0.04 0.12" numOctaves="2" result="wobble" seed="3">
                                    <animate attributeName="baseFrequency" values="0.04 0.12;0.06 0.16;0.04 0.12" dur="2s" repeatCount="indefinite"/>
                                </feTurbulence>
                                <feDisplacementMap in="SourceGraphic" in2="wobble" scale="2" xChannelSelector="R" yChannelSelector="G"/>
                            </filter>
                        </defs>
                    </svg>
                    <div class="sun-container">
                        <div class="flame-particles" id="flameParticles"></div>
                        <div class="sun-corona"></div>
                        <div class="sun-rays" id="sunRays"></div>
                        <div class="sun-body"></div>
                    </div>
                `;
                
                // Create kris blade rays - smaller with wobble
                const raysContainer = document.getElementById('sunRays');
                const bladeCount = 12;
                
                for (let i = 0; i < bladeCount; i++) {
                    const blade = document.createElement('div');
                    blade.className = 'kris-blade';
                    blade.style.setProperty('--ray-rotation', `${i * (360 / bladeCount)}deg`);
                    blade.style.setProperty('--ray-translate', '-40px');
                    
                    // Kris blade with 7 wave joints
                    const waves = 7;
                    const bladeHeight = 35;
                    const bladeWidth = 10;
                    const amplitude = 1.5;
                    
                    // Build serpentine blade path
                    let pathD = `M ${bladeWidth/2} ${bladeHeight}`;
                    
                    // Left edge with 7 waves
                    const segments = 28;
                    for (let s = 0; s <= segments; s++) {
                        const progress = s / segments;
                        const y = bladeHeight * (1 - progress);
                        const waveOffset = Math.sin(progress * waves * Math.PI) * amplitude * (1 - progress * 0.4);
                        const x = bladeWidth/2 - 1.5 - waveOffset;
                        pathD += ` L ${x.toFixed(2)} ${y.toFixed(2)}`;
                    }
                    
                    // Tip
                    pathD += ` L ${bladeWidth/2} -3`;
                    
                    // Right edge (mirrored)
                    for (let s = segments; s >= 0; s--) {
                        const progress = s / segments;
                        const y = bladeHeight * (1 - progress);
                        const waveOffset = Math.sin(progress * waves * Math.PI) * amplitude * (1 - progress * 0.4);
                        const x = bladeWidth/2 + 1.5 + waveOffset;
                        pathD += ` L ${x.toFixed(2)} ${y.toFixed(2)}`;
                    }
                    
                    pathD += ' Z';
                    
                    // SVG with wobble filter
                    blade.innerHTML = `
                        <svg viewBox="0 0 ${bladeWidth} ${bladeHeight + 6}" preserveAspectRatio="none" style="filter: url(#bladeWobble);">
                            <defs>
                                <linearGradient id="bg${i}" x1="0%" y1="100%" x2="0%" y2="0%">
                                    <stop offset="0%" stop-color="#ffd700"/>
                                    <stop offset="40%" stop-color="#ffb000"/>
                                    <stop offset="70%" stop-color="#ff8c00"/>
                                    <stop offset="100%" stop-color="#ff4500" stop-opacity="0.3"/>
                                </linearGradient>
                            </defs>
                            <path d="${pathD}" fill="url(#bg${i})" transform="translate(0, 3)"/>
                        </svg>
                    `;
                    
                    raysContainer.appendChild(blade);
                }
                
                // Create flame particles with enhanced gooey effect
                const flameContainer = document.getElementById('flameParticles');
                const particleCount = 45;
                let particleIndex = 0;
                
                function createFlameParticle(forceAngle = null, forceType = null) {
                    const particle = document.createElement('div');
                    
                    // Random type: flame, ember, spark, wisp, scatter, or mingle
                    const rand = forceType !== null ? -1 : Math.random();
                    const type = forceType || (
                        rand < 0.25 ? 'flame' :
                        rand < 0.40 ? 'ember' :
                        rand < 0.52 ? 'spark' :
                        rand < 0.65 ? 'wisp' :
                        rand < 0.82 ? 'scatter' : 'mingle'
                    );
                    
                    if (type === 'flame') {
                        // Main flames - larger teardrop shapes
                        particle.className = 'flame-particle';
                        particle.style.width = (8 + Math.random() * 10) + 'px';
                        particle.style.height = (12 + Math.random() * 14) + 'px';
                    } else if (type === 'ember') {
                        // Embers - medium glowing orbs
                        particle.className = 'flame-particle ember';
                        const size = 5 + Math.random() * 7;
                        particle.style.width = size + 'px';
                        particle.style.height = size + 'px';
                    } else if (type === 'spark') {
                        // Sparks - bright tiny dots
                        particle.className = 'flame-particle spark';
                        const size = 2 + Math.random() * 3;
                        particle.style.width = size + 'px';
                        particle.style.height = size + 'px';
                    } else if (type === 'wisp') {
                        // Wisps - elongated ethereal flames
                        particle.className = 'flame-particle wisp';
                        particle.style.width = (6 + Math.random() * 8) + 'px';
                        particle.style.height = (16 + Math.random() * 20) + 'px';
                    } else if (type === 'scatter') {
                        // Scatter - small erratic particles
                        particle.className = 'flame-particle scatter';
                        const size = 3 + Math.random() * 4;
                        particle.style.width = size + 'px';
                        particle.style.height = size + 'px';
                        // Erratic zigzag waypoints
                        particle.style.setProperty('--scatter-x1', (Math.random() * 16 - 8) + 'px');
                        particle.style.setProperty('--scatter-y1', (-5 - Math.random() * 12) + 'px');
                        particle.style.setProperty('--scatter-x2', (Math.random() * 20 - 10) + 'px');
                        particle.style.setProperty('--scatter-y2', (-18 - Math.random() * 15) + 'px');
                        particle.style.setProperty('--scatter-x3', (Math.random() * 18 - 9) + 'px');
                        particle.style.setProperty('--scatter-y3', (-30 - Math.random() * 15) + 'px');
                    } else {
                        // Mingle - particles that gravitate toward others
                        particle.className = 'flame-particle mingle';
                        const size = 5 + Math.random() * 6;
                        particle.style.width = size + 'px';
                        particle.style.height = size + 'px';
                        // Movement toward center/other particles
                        particle.style.setProperty('--mingle-x', (Math.random() * 12 - 6) + 'px');
                        particle.style.setProperty('--mingle-y', (Math.random() * 10 - 5) + 'px');
                    }
                    
                    // Use golden angle for even distribution, or forced angle
                    const goldenAngle = 137.508 * (Math.PI / 180);
                    const baseAngle = forceAngle !== null ? forceAngle : (particleIndex * goldenAngle);
                    const angle = baseAngle + (Math.random() - 0.5) * 0.6;
                    particleIndex++;
                    
                    // Vary distance in layers
                    const layer = Math.floor(Math.random() * 4);
                    const baseDistance = [36, 46, 56, 68][layer];
                    const distance = baseDistance + (Math.random() - 0.5) * 10;
                    
                    const startX = Math.cos(angle) * distance;
                    const startY = Math.sin(angle) * distance;
                    
                    // Drift direction (outward + upward bias)
                    const driftAngle = angle + (Math.random() - 0.5) * 0.7;
                    const driftDistance = 25 + Math.random() * 35;
                    const endX = Math.cos(driftAngle) * (distance + driftDistance);
                    const endY = Math.sin(driftAngle) * (distance + driftDistance) - 20 - Math.random() * 30;
                    
                    particle.style.setProperty('--start-x', startX + 'px');
                    particle.style.setProperty('--start-y', startY + 'px');
                    particle.style.setProperty('--drift-x', (endX - startX) / 2 + 'px');
                    particle.style.setProperty('--drift-y', (endY - startY) / 2 + 'px');
                    particle.style.setProperty('--end-x', (endX - startX) + 'px');
                    particle.style.setProperty('--end-y', (endY - startY) + 'px');
                    particle.style.setProperty('--rotation', (Math.random() * 60 - 30) + 'deg');
                    particle.style.setProperty('--flame-duration', (1.5 + Math.random() * 1.5) + 's');
                    particle.style.setProperty('--flame-delay', (Math.random() * 0.5) + 's');
                    
                    return particle;
                }
                
                // Initial particles - evenly distributed around the sun
                for (let i = 0; i < particleCount; i++) {
                    const angle = (i / particleCount) * Math.PI * 2;
                    flameContainer.appendChild(createFlameParticle(angle));
                }
                // Second wave with offset for fuller coverage
                for (let i = 0; i < 20; i++) {
                    const angle = ((i + 0.5) / 20) * Math.PI * 2;
                    flameContainer.appendChild(createFlameParticle(angle));
                }
                // Third wave - scatter particles for erratic movement
                for (let i = 0; i < 12; i++) {
                    const angle = ((i + 0.25) / 12) * Math.PI * 2;
                    flameContainer.appendChild(createFlameParticle(angle, 'scatter'));
                }
                // Fourth wave - mingle particles that gravitate
                for (let i = 0; i < 10; i++) {
                    const angle = ((i + 0.75) / 10) * Math.PI * 2;
                    flameContainer.appendChild(createFlameParticle(angle, 'mingle'));
                }
                
                // Continuously regenerate particles with variety
                setInterval(() => {
                    const toAdd = Math.floor(Math.random() * 4) + 3;
                    for (let i = 0; i < toAdd; i++) {
                        if (flameContainer.children.length < particleCount + 45) {
                            // Occasionally force scatter or mingle types
                            const forceType = Math.random() < 0.3 ? (Math.random() < 0.5 ? 'scatter' : 'mingle') : null;
                            flameContainer.appendChild(createFlameParticle(null, forceType));
                        }
                    }
                    // Remove old particles
                    while (flameContainer.children.length > particleCount + 50) {
                        flameContainer.removeChild(flameContainer.firstChild);
                    }
                }, 250);
            } else {
                // Calculate moon phase (synodic month = 29.53 days)
                const moonPhase = getMoonPhase();
                const phaseClipPath = getMoonPhaseClipPath(moonPhase);
                
                // Create moon structure with phase
                celestial.innerHTML = `
                    <div class="moon-container">
                        <div class="moon-glow"></div>
                        <div class="moon-sparkles" id="moonSparkles"></div>
                        <div class="moon-body">
                            <div class="moon-crater-small"></div>
                        </div>
                        <div class="moon-clouds" id="moonClouds"></div>
                        <div class="moon-phase" style="clip-path: ${phaseClipPath}"></div>
                    </div>
                `;
                
                // Create moon clouds
                createMoonClouds();
                // Create moon sparkles
                createMoonSparkles();
            }
        }
        
        // Calculate current moon phase (0 = new moon, 0.5 = full moon, 1 = new moon)
        function getMoonPhase() {
            const now = new Date();
            // Known new moon: January 11, 2024 11:57 UTC
            const knownNewMoon = new Date('2024-01-11T11:57:00Z');
            const synodicMonth = 29.53058867; // days
            
            const daysSinceNewMoon = (now - knownNewMoon) / (1000 * 60 * 60 * 24);
            const phase = (daysSinceNewMoon % synodicMonth) / synodicMonth;
            
            return phase;
        }
        
        // Generate clip-path for moon phase
        // Phase: 0 = new moon (dark), 0.25 = first quarter, 0.5 = full moon, 0.75 = last quarter
        function getMoonPhaseClipPath(phase) {
            // For the shadow overlay:
            // - New moon (0): full shadow covering entire moon
            // - Waxing (0-0.5): shadow recedes from right to left
            // - Full moon (0.5): no shadow
            // - Waning (0.5-1): shadow grows from right to left
            
            if (phase < 0.01 || phase > 0.99) {
                // New moon - full shadow
                return 'ellipse(50% 50% at 50% 50%)';
            }
            
            if (phase > 0.49 && phase < 0.51) {
                // Full moon - no shadow
                return 'ellipse(0% 0% at 50% 50%)';
            }
            
            // Calculate the terminator position
            // Using ellipse clip-path to simulate spherical shadow
            
            if (phase < 0.5) {
                // Waxing: shadow on left, shrinking
                // At phase 0: shadow covers 100% from left
                // At phase 0.25: shadow covers 50% from left (first quarter)
                // At phase 0.5: shadow covers 0%
                const shadowWidth = 50 - (phase * 100);
                const curveAmount = Math.abs(phase - 0.25) * 100;
                
                if (phase < 0.25) {
                    // Waxing crescent - elliptical shadow on left
                    const ellipseWidth = 50 + (0.25 - phase) * 100;
                    return `ellipse(${ellipseWidth}% 50% at ${100 - phase * 200}% 50%)`;
                } else {
                    // Waxing gibbous - shadow retreating from left
                    const coverPoint = 50 - (phase - 0.25) * 200;
                    return `inset(0 ${100 - coverPoint}% 0 0)`;
                }
            } else {
                // Waning: shadow on right, growing
                // At phase 0.5: shadow covers 0%
                // At phase 0.75: shadow covers 50% from right (last quarter)
                // At phase 1: shadow covers 100%
                const adjustedPhase = phase - 0.5;
                
                if (phase < 0.75) {
                    // Waning gibbous - shadow growing from right
                    const coverPoint = adjustedPhase * 200;
                    return `inset(0 0 0 ${100 - coverPoint}%)`;
                } else {
                    // Waning crescent - elliptical shadow on right
                    const ellipseWidth = 50 + (phase - 0.75) * 100;
                    return `ellipse(${ellipseWidth}% 50% at ${(phase - 0.5) * 200}% 50%)`;
                }
            }
        }

        function initParallax() {
            document.addEventListener('mousemove', (e) => {
                const mouseX = e.clientX / window.innerWidth - 0.5;
                const mouseY = e.clientY / window.innerHeight - 0.5;
                
                const celestial = document.getElementById('celestialBody');
                if (celestial) {
                    celestial.style.transform = `translate(${mouseX * -30}px, ${mouseY * -30}px)`;
                }
            });
        }

        // ========== GITHUB API ==========
        const username = 'geket';

        // Language colors (GitHub's colors)
        const langColors = {
            JavaScript: '#f1e05a',
            TypeScript: '#3178c6',
            Python: '#3572A5',
            Java: '#b07219',
            'C++': '#f34b7d',
            C: '#555555',
            'C#': '#178600',
            Ruby: '#701516',
            Go: '#00ADD8',
            Rust: '#dea584',
            PHP: '#4F5D95',
            Swift: '#F05138',
            Kotlin: '#A97BFF',
            Dart: '#00B4AB',
            HTML: '#e34c26',
            CSS: '#563d7c',
            SCSS: '#c6538c',
            Vue: '#41b883',
            Shell: '#89e051',
            Lua: '#000080',
            R: '#198CE7',
            Jupyter: '#DA5B0B',
            Default: '#ffb7c5'
        };

        // Fetch repositories and calculate stats
        fetch(`https://api.github.com/users/${username}/repos?per_page=100&sort=updated`)
            .then(res => res.json())
            .then(async repos => {
                if (repos && repos.length > 0 && !repos.message) {
                    // Update portfolio grid
                    const grid = document.querySelector('.portfolio-grid');
                    const topRepos = repos.slice(0, 6);
                    grid.innerHTML = topRepos.map(repo => `
                        <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer" class="project-card-link">
                            <div class="project-card">
                                <h3>${repo.name}</h3>
                                <p>${repo.description || 'A beautiful creation awaiting description...'}</p>
                                <div class="project-tags">
                                    ${repo.language ? `<span class="tag">${repo.language}</span>` : ''}
                                    <span class="tag">â­ ${repo.stargazers_count}</span>
                                    ${repo.forks_count > 0 ? `<span class="tag">ðŸ´ ${repo.forks_count}</span>` : ''}
                                </div>
                            </div>
                        </a>
                    `).join('');

                    // Calculate total stars
                    const totalStars = repos.reduce((sum, repo) => sum + repo.stargazers_count, 0);
                    document.getElementById('stat-stars').textContent = totalStars;

                    // Calculate language stats BY REPOS (original method)
                    const langCountRepos = {};
                    const langRepos = {}; // Track repos per language
                    repos.forEach(repo => {
                        if (repo.language) {
                            langCountRepos[repo.language] = (langCountRepos[repo.language] || 0) + 1;
                            if (!langRepos[repo.language]) langRepos[repo.language] = [];
                            langRepos[repo.language].push(repo);
                        }
                    });

                    // Calculate language stats BY LINES (fetch language breakdown for each repo)
                    const langCountLines = {};
                    const batchSize = 5; // Process 5 repos at a time
                    
                    for (let i = 0; i < repos.length; i += batchSize) {
                        const batch = repos.slice(i, i + batchSize);
                        await Promise.all(batch.map(async repo => {
                            try {
                                const langRes = await fetch(`https://api.github.com/repos/${username}/${repo.name}/languages`);
                                const langData = await langRes.json();
                                if (langData && !langData.message) {
                                    Object.entries(langData).forEach(([lang, bytes]) => {
                                        langCountLines[lang] = (langCountLines[lang] || 0) + bytes;
                                    });
                                }
                            } catch (err) {
                                // Silently fail for rate limits or errors
                            }
                        }));
                        // Small delay between batches to avoid rate limits
                        if (i + batchSize < repos.length) {
                            await new Promise(resolve => setTimeout(resolve, 100));
                        }
                    }

                    // Sort and get top 8 languages for both methods
                    const sortedLangsByRepos = Object.entries(langCountRepos)
                        .sort((a, b) => b[1] - a[1])
                        .slice(0, 8);

                    const sortedLangsByLines = Object.entries(langCountLines)
                        .sort((a, b) => b[1] - a[1])
                        .slice(0, 8);

                    const totalLangRepos = sortedLangsByRepos.reduce((sum, [, count]) => sum + count, 0);
                    const totalLangLines = sortedLangsByLines.reduce((sum, [, bytes]) => sum + bytes, 0);

                    // Store both language data globally
                    window.langData = { 
                        sortedLangsByRepos, 
                        sortedLangsByLines,
                        langRepos, 
                        totalLangRepos,
                        totalLangLines,
                        langColors,
                        currentMode: 'lines' // Default to "by lines"
                    };

                    // Function to render language bars based on current mode
                    function renderLanguageBars(mode = 'lines') {
                        const sortedLangs = mode === 'lines' ? sortedLangsByLines : sortedLangsByRepos;
                        const totalLang = mode === 'lines' ? totalLangLines : totalLangRepos;
                        
                        const langBarsContainer = document.getElementById('language-bars');
                        const langExpandBtn = document.getElementById('langExpandBtn');
                        
                        langBarsContainer.innerHTML = sortedLangs.map(([lang, value], index) => {
                            let percent, displayText;
                            if (mode === 'lines') {
                                percent = Math.round((value / totalLang) * 100);
                                // Convert bytes to KB/MB for display
                                const kb = Math.round(value / 1024);
                                const mb = (kb / 1024).toFixed(1);
                                displayText = kb > 1024 ? `${mb} MB` : `${kb} KB`;
                            } else {
                                percent = Math.round((value / totalLang) * 100);
                                displayText = `${value} repos`;
                            }
                            
                            const color = langColors[lang] || langColors.Default;
                            const hiddenClass = index >= 5 ? 'hidden' : '';
                            const repoCount = langRepos[lang]?.length || 0;
                            
                            return `
                                <div class="lang-item expandable ${hiddenClass}" data-lang="${lang}" data-index="${index}">
                                    <div class="lang-info">
                                        <span class="lang-name">
                                            <span class="lang-dot" style="background: ${color}"></span>
                                            ${lang}
                                            <span class="lang-expand-icon">â–¶</span>
                                        </span>
                                        <span class="lang-percent">${percent}% (${displayText})</span>
                                    </div>
                                    <div class="lang-bar-bg">
                                        <div class="lang-bar-fill" style="width: ${percent}%; background: ${color}"></div>
                                    </div>
                                    <div class="lang-details" id="lang-details-${index}">
                                        <div class="lang-stats">
                                            <div class="lang-stat">
                                                <span>ðŸ“</span>
                                                <span class="lang-stat-value">${repoCount}</span>
                                                <span>repositories</span>
                                            </div>
                                            <div class="lang-stat">
                                                <span>ðŸ“</span>
                                                <span class="lang-stat-value" id="lang-commits-${index}">...</span>
                                                <span>total commits</span>
                                            </div>
                                        </div>
                                        <div class="lang-commits">
                                            <div class="lang-commits-title">Latest commits:</div>
                                            <div id="lang-commit-list-${index}">
                                                <div class="lang-commit-item">Loading commits...</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('');

                        // Show expand button if more than 5 languages
                        if (sortedLangs.length > 5) {
                            langExpandBtn.style.display = 'flex';
                        } else {
                            langExpandBtn.style.display = 'none';
                        }
                    }

                    // Initial render with "by lines" mode (default)
                    renderLanguageBars('lines');
                    
                    // Add toggle button handler
                    const langModeToggle = document.getElementById('langModeToggle');
                    langModeToggle.addEventListener('click', function() {
                        window.langData.currentMode = window.langData.currentMode === 'lines' ? 'repos' : 'lines';
                        renderLanguageBars(window.langData.currentMode);
                        
                        // Update button text
                        this.querySelector('.mode-text').textContent = 
                            window.langData.currentMode === 'lines' ? 'By Repos' : 'By Lines';
                    });

                    // Language expand button handler
                    const langBarsContainer = document.getElementById('language-bars');
                    const langExpandBtn = document.getElementById('langExpandBtn');
                    
                    langExpandBtn.addEventListener('click', function() {
                        const isExpanded = this.classList.toggle('expanded');
                        const hiddenLangs = langBarsContainer.querySelectorAll('.lang-item[data-index]');
                        hiddenLangs.forEach(item => {
                            const idx = parseInt(item.dataset.index);
                            if (idx >= 5) {
                                item.classList.toggle('hidden', !isExpanded);
                            }
                        });
                        this.querySelector('span:first-child').textContent = isExpanded ? 'Show less' : 'Show more';
                    });

                    // Language item click handler for sub-expand
                    langBarsContainer.addEventListener('click', async function(e) {
                        const langItem = e.target.closest('.lang-item');
                        if (!langItem) return;
                        
                        const lang = langItem.dataset.lang;
                        const index = langItem.dataset.index;
                        const wasExpanded = langItem.classList.contains('expanded');
                        
                        // Close all other expanded items
                        langBarsContainer.querySelectorAll('.lang-item.expanded').forEach(item => {
                            if (item !== langItem) item.classList.remove('expanded');
                        });
                        
                        langItem.classList.toggle('expanded');
                        
                        // Fetch commits if newly expanded
                        if (!wasExpanded && langItem.classList.contains('expanded')) {
                            const repos = window.langData.langRepos[lang] || [];
                            let totalCommits = 0;
                            let allCommits = [];
                            
                            // Fetch commits from top 3 repos of this language
                            const topRepos = repos.slice(0, 3);
                            for (const repo of topRepos) {
                                try {
                                    const commitsRes = await fetch(`https://api.github.com/repos/${username}/${repo.name}/commits?per_page=5`);
                                    const commits = await commitsRes.json();
                                    if (Array.isArray(commits)) {
                                        totalCommits += commits.length;
                                        allCommits.push(...commits.map(c => ({
                                            msg: c.commit?.message?.split('\n')[0] || 'No message',
                                            repo: repo.name,
                                            date: c.commit?.author?.date || '',
                                            sha: c.sha?.substring(0, 7) || ''
                                        })));
                                    }
                                } catch (err) {
                                    console.log('Could not fetch commits for', repo.name);
                                }
                            }
                            
                            // Estimate total commits (5 per repo average)
                            const estimatedTotal = repos.length * 15;
                            document.getElementById(`lang-commits-${index}`).textContent = `~${estimatedTotal}`;
                            
                            // Show latest 3 commits
                            const commitList = document.getElementById(`lang-commit-list-${index}`);
                            if (allCommits.length > 0) {
                                const latestCommits = allCommits.slice(0, 3);
                                commitList.innerHTML = latestCommits.map(c => {
                                    const date = c.date ? new Date(c.date).toLocaleDateString() : '';
                                    return `
                                        <div class="lang-commit-item">
                                            <span class="commit-icon">â—</span>
                                            <div class="commit-info">
                                                <div class="commit-msg">${c.msg.substring(0, 50)}${c.msg.length > 50 ? '...' : ''}</div>
                                                <div class="commit-meta">
                                                    <span class="commit-repo">${c.repo}</span>
                                                    <span>${c.sha}</span>
                                                    <span>${date}</span>
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                }).join('');
                            } else {
                                commitList.innerHTML = '<div class="lang-commit-item">No commits found</div>';
                            }
                        }
                    });
                }
            })
            .catch(err => {
                console.log('Note: GitHub API requires deployment to work. Deploy to geket.github.io to see live data.');
            });

        // Fetch user stats
        fetch(`https://api.github.com/users/${username}`)
            .then(res => res.json())
            .then(user => {
                if (user && !user.message) {
                    document.getElementById('repoCount').textContent = user.public_repos;
                    document.getElementById('followerCount').textContent = user.followers;
                    document.getElementById('contributionCount').textContent = user.following;
                    
                    // Also update the custom stats
                    document.getElementById('stat-repos').textContent = user.public_repos;
                    document.getElementById('stat-followers').textContent = user.followers;
                    document.getElementById('stat-following').textContent = user.following;
                }
            })
            .catch(err => {
                // Stats will show placeholder values
            });

        // Fetch starred repos (responsive: mobile=16, desktop=21)
        const isMobile = window.innerWidth <= 768;
        const starsPerPage = isMobile ? 16 : 21;
        const initialVisible = isMobile ? 6 : 9;
        
        fetch(`https://api.github.com/users/${username}/starred?per_page=${starsPerPage}&sort=created`)
            .then(res => res.json())
            .then(starred => {
                if (starred && starred.length > 0 && !starred.message) {
                    const starsContainer = document.getElementById('recent-stars');
                    const expandBtn = document.getElementById('expandStarsBtn');
                    
                    starsContainer.innerHTML = starred.map((repo, index) => {
                        // Format the starred timestamp
                        const starredDate = new Date(repo.starred_at || repo.created_at);
                        const now = new Date();
                        const diffMs = now - starredDate;
                        const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
                        const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
                        const diffMinutes = Math.floor(diffMs / (1000 * 60));
                        
                        let timeAgo;
                        if (diffDays > 0) {
                            timeAgo = diffDays === 1 ? '1 day ago' : `${diffDays} days ago`;
                        } else if (diffHours > 0) {
                            timeAgo = diffHours === 1 ? '1 hour ago' : `${diffHours} hours ago`;
                        } else if (diffMinutes > 0) {
                            timeAgo = diffMinutes === 1 ? '1 minute ago' : `${diffMinutes} minutes ago`;
                        } else {
                            timeAgo = 'Just now';
                        }
                        
                        return `
                        <div class="star-item ${index >= initialVisible ? 'hidden' : ''}">
                            <span class="star-icon">â­</span>
                            <div>
                                <a href="${repo.html_url}" target="_blank" rel="noopener noreferrer">${repo.full_name}</a>
                                <p class="star-desc">${repo.description || 'No description'}</p>
                                <p class="star-timestamp">${timeAgo}</p>
                            </div>
                        </div>
                        `;
                    }).join('');

                    // Show expand button if more than initial visible stars
                    if (starred.length > initialVisible) {
                        expandBtn.style.display = 'flex';
                        
                        expandBtn.addEventListener('click', () => {
                            const hiddenItems = starsContainer.querySelectorAll('.star-item.hidden');
                            const visibleItems = starsContainer.querySelectorAll('.star-item:not(.hidden)');
                            
                            if (hiddenItems.length > 0) {
                                // Expand
                                hiddenItems.forEach((item, i) => {
                                    setTimeout(() => {
                                        item.classList.remove('hidden');
                                        item.classList.add('show');
                                    }, i * 50);
                                });
                                expandBtn.querySelector('.expand-text').textContent = 'Show Less';
                                expandBtn.classList.add('expanded');
                            } else {
                                // Collapse
                                const allItems = starsContainer.querySelectorAll('.star-item');
                                allItems.forEach((item, index) => {
                                    if (index >= initialVisible) {
                                        item.classList.add('hidden');
                                        item.classList.remove('show');
                                    }
                                });
                                expandBtn.querySelector('.expand-text').textContent = 'Show More';
                                expandBtn.classList.remove('expanded');
                            }
                        });
                    }
                }
            })
            .catch(err => {
                document.getElementById('recent-stars').innerHTML = '<p style="opacity:0.6; font-size:0.85rem;">Stars will load when deployed</p>';
            });

        // Fetch activity feed with automatic pagination to get full 15 public events
        async function fetchRecentActivity() {
            const maxEvents = 15;
            const maxPages = 5; // Don't fetch more than 5 pages
            let allPublicEvents = [];
            let page = 1;
            
            while (allPublicEvents.length < maxEvents && page <= maxPages) {
                try {
                    const res = await fetch(`https://api.github.com/users/${username}/events/public?per_page=30&page=${page}`);
                    const events = await res.json();
                    
                    if (!events || events.length === 0 || events.message) break;
                    
                    // Filter out events from private repos (they won't have full repo data)
                    const publicEvents = events.filter(event => event.repo && event.repo.name);
                    allPublicEvents.push(...publicEvents);
                    
                    // If we got fewer events than requested, we've reached the end
                    if (events.length < 30) break;
                    
                    page++;
                } catch (err) {
                    break;
                }
            }
            
            // Take only the first maxEvents
            const displayEvents = allPublicEvents.slice(0, maxEvents);
            
            if (displayEvents.length > 0) {
                    const activityContainer = document.getElementById('activity-feed');
                    const expandBtn = document.getElementById('expandActivityBtn');
                    
                    const activityIcons = {
                        'PushEvent': 'ðŸ“¤',
                        'PullRequestEvent': 'ðŸ”€',
                        'IssuesEvent': 'ðŸ›',
                        'CreateEvent': 'âœ¨',
                        'DeleteEvent': 'ðŸ—‘ï¸',
                        'WatchEvent': 'â­',
                        'ForkEvent': 'ðŸ´',
                        'IssueCommentEvent': 'ðŸ’¬',
                        'PullRequestReviewEvent': 'ðŸ‘€',
                        'PullRequestReviewCommentEvent': 'ðŸ’­',
                        'ReleaseEvent': 'ðŸš€'
                    };

                    const formatEvent = (event) => {
                        const repoName = event.repo.name;
                        const repoUrl = `https://github.com/${repoName}`;
                        
                        switch(event.type) {
                            case 'PushEvent':
                                const commits = event.payload.commits?.length || event.payload.size || 1;
                                return `Pushed ${commits} commit${commits !== 1 ? 's' : ''} to <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'PullRequestEvent':
                                return `${event.payload.action.charAt(0).toUpperCase() + event.payload.action.slice(1)} PR in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'IssuesEvent':
                                return `${event.payload.action.charAt(0).toUpperCase() + event.payload.action.slice(1)} issue in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'CreateEvent':
                                return `Created ${event.payload.ref_type} in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'WatchEvent':
                                return `Starred <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'ForkEvent':
                                return `Forked <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'IssueCommentEvent':
                                return `Commented on issue in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'PullRequestReviewEvent':
                                return `Reviewed PR in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'PullRequestReviewCommentEvent':
                                return `Commented on PR in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            case 'ReleaseEvent':
                                return `Released ${event.payload.release?.tag_name || 'version'} in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                            default:
                                return `Activity in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                        }
                    };

                    const timeAgo = (date) => {
                        const seconds = Math.floor((new Date() - new Date(date)) / 1000);
                        if (seconds < 60) return 'just now';
                        const minutes = Math.floor(seconds / 60);
                        if (minutes < 60) return `${minutes}m ago`;
                        const hours = Math.floor(minutes / 60);
                        if (hours < 24) return `${hours}h ago`;
                        const days = Math.floor(hours / 24);
                        if (days < 30) return `${days}d ago`;
                        return new Date(date).toLocaleDateString();
                    };

                    activityContainer.innerHTML = displayEvents.map((event, index) => `
                        <div class="activity-item ${index >= 4 ? 'hidden' : ''}">
                            <span class="activity-icon">${activityIcons[event.type] || 'ðŸ“Œ'}</span>
                            <div class="activity-content">
                                <p class="activity-text">${formatEvent(event)}</p>
                                <p class="activity-time">${timeAgo(event.created_at)}</p>
                            </div>
                        </div>
                    `).join('');

                    // Show expand button if more than 4 activities
                    if (displayEvents.length > 4) {
                        expandBtn.style.display = 'flex';
                        
                        expandBtn.addEventListener('click', () => {
                            const hiddenItems = activityContainer.querySelectorAll('.activity-item.hidden');
                            const visibleItems = activityContainer.querySelectorAll('.activity-item:not(.hidden)');
                            
                            if (hiddenItems.length > 0) {
                                // Expand
                                hiddenItems.forEach((item, i) => {
                                    setTimeout(() => {
                                        item.classList.remove('hidden');
                                        item.classList.add('show');
                                    }, i * 50);
                                });
                                expandBtn.querySelector('span:first-child').textContent = 'Show Less';
                                expandBtn.classList.add('expanded');
                            } else {
                                // Collapse
                                const allItems = activityContainer.querySelectorAll('.activity-item');
                                allItems.forEach((item, index) => {
                                    if (index >= 4) {
                                        item.classList.add('hidden');
                                        item.classList.remove('show');
                                    }
                                });
                                expandBtn.querySelector('span:first-child').textContent = 'Show More';
                                expandBtn.classList.remove('expanded');
                            }
                        });
                    }

                    // Calculate activity breakdown for pentagon chart
                    const activityCounts = {
                        commits: 0,
                        codeReview: 0,
                        issues: 0,
                        pullRequests: 0,
                        privateContrib: 6 // Default estimate for private contributions
                    };

                    displayEvents.forEach(event => {
                        switch(event.type) {
                            case 'PushEvent':
                                activityCounts.commits += event.payload.commits?.length || event.payload.size || 1;
                                break;
                            case 'PullRequestReviewEvent':
                            case 'PullRequestReviewCommentEvent':
                                activityCounts.codeReview++;
                                break;
                            case 'IssuesEvent':
                            case 'IssueCommentEvent':
                                activityCounts.issues++;
                                break;
                            case 'PullRequestEvent':
                                activityCounts.pullRequests++;
                                break;
                        }
                    });

                    drawActivityChart(activityCounts);
                }
            }
        
        // Call the async function
        fetchRecentActivity();

        // Draw Activity Chart (Pentagon style like GitHub)
        function drawActivityChart(data) {
            const canvas = document.getElementById('activityChart');
            if (!canvas) return;
            
            // High DPI support
            const dpr = window.devicePixelRatio || 1;
            const displayWidth = 340;
            const displayHeight = 340;
            
            // Set actual size in memory (scaled for retina)
            canvas.width = displayWidth * dpr;
            canvas.height = displayHeight * dpr;
            
            // Set display size (CSS)
            canvas.style.width = displayWidth + 'px';
            canvas.style.height = displayHeight + 'px';
            
            const ctx = canvas.getContext('2d');
            
            // Scale all drawing operations
            ctx.scale(dpr, dpr);
            
            const centerX = displayWidth / 2;
            const centerY = displayHeight / 2;
            const maxRadius = Math.min(centerX, centerY) - 70; // More padding for labels

            // Clear canvas
            ctx.clearRect(0, 0, displayWidth, displayHeight);

            // Calculate total and percentages (5 axes for pentagon)
            const total = data.commits + data.codeReview + data.issues + data.pullRequests + data.privateContrib;
            const values = [
                total > 0 ? data.commits / total : 0.2,
                total > 0 ? data.codeReview / total : 0.2,
                total > 0 ? data.issues / total : 0.2,
                total > 0 ? data.pullRequests / total : 0.2,
                total > 0 ? data.privateContrib / total : 0.2
            ];

            // Points for pentagon shape (5 points, starting from top)
            const numPoints = 5;
            const angles = [];
            for (let i = 0; i < numPoints; i++) {
                angles.push(-Math.PI / 2 + (2 * Math.PI * i) / numPoints);
            }
            
            // Draw grid lines (pentagon shapes at different radii)
            ctx.strokeStyle = 'rgba(255, 183, 197, 0.1)';
            ctx.lineWidth = 1;
            
            for (let r = 0.25; r <= 1; r += 0.25) {
                ctx.beginPath();
                for (let i = 0; i < numPoints; i++) {
                    const x = centerX + Math.cos(angles[i]) * maxRadius * r;
                    const y = centerY + Math.sin(angles[i]) * maxRadius * r;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }

            // Draw axis lines from center to each vertex
            ctx.strokeStyle = 'rgba(255, 183, 197, 0.15)';
            for (let i = 0; i < numPoints; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(
                    centerX + Math.cos(angles[i]) * maxRadius,
                    centerY + Math.sin(angles[i]) * maxRadius
                );
                ctx.stroke();
            }

            // Draw data shape
            ctx.beginPath();
            const minScale = 0.12;
            for (let i = 0; i < numPoints; i++) {
                const scale = minScale + values[i] * (1 - minScale);
                const x = centerX + Math.cos(angles[i]) * maxRadius * Math.min(scale * 2, 1);
                const y = centerY + Math.sin(angles[i]) * maxRadius * Math.min(scale * 2, 1);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.closePath();

            // Fill with gradient
            const gradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, maxRadius);
            gradient.addColorStop(0, 'rgba(100, 200, 150, 0.5)');
            gradient.addColorStop(1, 'rgba(100, 200, 150, 0.15)');
            ctx.fillStyle = gradient;
            ctx.fill();

            // Stroke outline
            ctx.strokeStyle = 'rgba(100, 200, 150, 0.9)';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Draw data points
            ctx.fillStyle = 'rgba(100, 200, 150, 1)';
            for (let i = 0; i < numPoints; i++) {
                const scale = minScale + values[i] * (1 - minScale);
                const x = centerX + Math.cos(angles[i]) * maxRadius * Math.min(scale * 2, 1);
                const y = centerY + Math.sin(angles[i]) * maxRadius * Math.min(scale * 2, 1);
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            }

            // Draw labels and percentage with proper alignment
            ctx.font = '11px "Cormorant Garamond", serif';
            
            // Label configurations with adjusted positions for better visibility
            // Using arrays for multi-line labels
            const labelConfigs = [
                { label: ['Commits'], align: 'center', dx: 0, dy: -10 },           // Top
                { label: ['Code', 'Review'], align: 'left', dx: 10, dy: -5 },      // Top right (stacked)
                { label: ['Issues'], align: 'left', dx: 8, dy: 8 },                // Bottom right
                { label: ['Pull', 'Requests'], align: 'right', dx: -8, dy: 0 },    // Bottom left (stacked)
                { label: ['Private'], align: 'right', dx: -10, dy: 0 }             // Top left
            ];

            for (let i = 0; i < numPoints; i++) {
                const labelRadius = maxRadius + 25;
                const baseX = centerX + Math.cos(angles[i]) * labelRadius;
                const baseY = centerY + Math.sin(angles[i]) * labelRadius;
                const x = baseX + labelConfigs[i].dx;
                const y = baseY + labelConfigs[i].dy;
                
                // Set text alignment
                ctx.textAlign = labelConfigs[i].align;
                
                // Draw label (multi-line support)
                ctx.fillStyle = 'rgba(255, 183, 197, 0.9)';
                const lines = labelConfigs[i].label;
                lines.forEach((line, lineIdx) => {
                    ctx.fillText(line, x, y + (lineIdx * 11));
                });
                
                // Draw percentage below the last line
                ctx.fillStyle = '#f8f0e3';
                ctx.fillText(`${Math.round(values[i] * 100)}%`, x, y + (lines.length * 11) + 2);
            }
        }

        // ========== MINECRAFT EASTER EGG GAME ==========
        // ========== WEATHER EFFECTS ==========
        function createVideoSakuraFrames() {
            const videoContainers = document.querySelectorAll('.video-container');
            
            videoContainers.forEach(container => {
                // Add additional decorative petals at each corner
                const petalPositions = [
                    { top: '-5px', right: '-5px', rotation: 45 },
                    { bottom: '-5px', left: '-5px', rotation: 135 },
                    { top: '50%', left: '-10px', rotation: 90 },
                    { top: '50%', right: '-10px', rotation: -90 },
                    { top: '-5px', left: '30%', rotation: 20 },
                    { bottom: '-5px', right: '30%', rotation: -20 }
                ];
                
                petalPositions.forEach((pos, index) => {
                    const petal = document.createElement('div');
                    petal.style.position = 'absolute';
                    petal.style.fontSize = '1.5rem';
                    petal.textContent = 'ðŸŒ¸';
                    petal.style.opacity = '0.7';
                    petal.style.transform = `rotate(${pos.rotation}deg)`;
                    petal.style.animation = `petalGlow ${3 + index * 0.3}s ease-in-out infinite`;
                    petal.style.animationDelay = `${index * 0.2}s`;
                    petal.style.zIndex = '10';
                    petal.style.pointerEvents = 'none';
                    
                    Object.assign(petal.style, pos);
                    delete petal.style.rotation;
                    
                    container.appendChild(petal);
                });
            });
        }

        // ========== WEATHER EFFECTS ==========
        async function initWeatherEffects() {
            // Get user's timezone
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            // Try to get weather based on timezone
            try {
                // Use Open-Meteo's geocoding API to get coordinates for timezone's major city
                const weatherCode = await getWeatherForTimezone(timezone);
                if (weatherCode !== null) {
                    applyWeatherEffect(weatherCode);
                }
            } catch (err) {
                console.log('Weather effects unavailable');
            }
        }

        async function getWeatherForTimezone(timezone) {
            try {
                // Map common timezones to coordinates (major cities)
                const timezoneCoords = {
                    'America/New_York': { lat: 40.7128, lon: -74.0060, name: 'New York' },
                    'America/Los_Angeles': { lat: 34.0522, lon: -118.2437, name: 'Los Angeles' },
                    'America/Chicago': { lat: 41.8781, lon: -87.6298, name: 'Chicago' },
                    'America/Denver': { lat: 39.7392, lon: -104.9903, name: 'Denver' },
                    'Europe/London': { lat: 51.5074, lon: -0.1278, name: 'London' },
                    'Europe/Paris': { lat: 48.8566, lon: 2.3522, name: 'Paris' },
                    'Europe/Berlin': { lat: 52.5200, lon: 13.4050, name: 'Berlin' },
                    'Asia/Tokyo': { lat: 35.6762, lon: 139.6503, name: 'Tokyo' },
                    'Asia/Shanghai': { lat: 31.2304, lon: 121.4737, name: 'Shanghai' },
                    'Asia/Dubai': { lat: 25.2048, lon: 55.2708, name: 'Dubai' },
                    'Australia/Sydney': { lat: -33.8688, lon: 151.2093, name: 'Sydney' },
                    'Pacific/Auckland': { lat: -36.8485, lon: 174.7633, name: 'Auckland' },
                    'America/Toronto': { lat: 43.6532, lon: -79.3832, name: 'Toronto' },
                    'America/Mexico_City': { lat: 19.4326, lon: -99.1332, name: 'Mexico City' },
                    'America/Sao_Paulo': { lat: -23.5505, lon: -46.6333, name: 'SÃ£o Paulo' },
                    'Asia/Singapore': { lat: 1.3521, lon: 103.8198, name: 'Singapore' },
                    'Asia/Hong_Kong': { lat: 22.3193, lon: 114.1694, name: 'Hong Kong' },
                    'Asia/Seoul': { lat: 37.5665, lon: 126.9780, name: 'Seoul' },
                    'Europe/Moscow': { lat: 55.7558, lon: 37.6173, name: 'Moscow' },
                    'Europe/Istanbul': { lat: 41.0082, lon: 28.9784, name: 'Istanbul' }
                };

                const coords = timezoneCoords[timezone];
                if (!coords) {
                    // Default to checking general region
                    return null;
                }

                // Fetch weather from Open-Meteo (free, no API key needed)
                const weatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${coords.lat}&longitude=${coords.lon}&current=weather_code,wind_speed_10m&timezone=auto`;
                const response = await fetch(weatherUrl);
                const data = await response.json();

                return data.current?.weather_code;
            } catch (err) {
                return null;
            }
        }

        function applyWeatherEffect(weatherCode) {
            // WMO Weather interpretation codes
            // 0: Clear sky, 1-3: Mainly clear/partly cloudy/overcast
            // 45, 48: Fog
            // 51-57: Drizzle/Rain
            // 61-67: Rain
            // 71-77: Snow
            // 80-82: Rain showers
            // 85-86: Snow showers
            // 95-99: Thunderstorm with hail

            const weatherContainer = document.createElement('div');
            weatherContainer.className = 'weather-container';
            weatherContainer.id = 'weatherEffects';
            document.body.appendChild(weatherContainer);

            if (weatherCode === 0) {
                // Clear/Sunny
                createSunnyEffect();
            } else if (weatherCode >= 1 && weatherCode <= 3) {
                // Cloudy
                createCloudyEffect();
            } else if (weatherCode === 45 || weatherCode === 48) {
                // Fog
                createFogEffect(weatherContainer);
            } else if ((weatherCode >= 51 && weatherCode <= 67) || (weatherCode >= 80 && weatherCode <= 82)) {
                // Rain
                createRainEffect(weatherContainer);
            } else if ((weatherCode >= 71 && weatherCode <= 77) || (weatherCode >= 85 && weatherCode <= 86)) {
                // Snow
                createSnowEffect(weatherContainer);
            } else if (weatherCode >= 95 && weatherCode <= 99) {
                // Hail/Thunderstorm
                createHailEffect(weatherContainer);
            }
        }

        function createRainEffect(container) {
            for (let i = 0; i < 100; i++) {
                const drop = document.createElement('div');
                drop.className = 'rain-drop';
                drop.style.left = `${Math.random() * 100}%`;
                drop.style.animationDuration = `${0.5 + Math.random() * 0.5}s`;
                drop.style.animationDelay = `${Math.random() * 2}s`;
                drop.style.height = `${10 + Math.random() * 10}px`;
                container.appendChild(drop);
            }
        }

        function createSnowEffect(container) {
            for (let i = 0; i < 50; i++) {
                const flake = document.createElement('div');
                flake.className = 'snow-flake';
                flake.textContent = 'â„';
                flake.style.left = `${Math.random() * 100}%`;
                flake.style.fontSize = `${10 + Math.random() * 10}px`;
                flake.style.animationDuration = `${5 + Math.random() * 5}s`;
                flake.style.animationDelay = `${Math.random() * 5}s`;
                container.appendChild(flake);
            }
        }

        function createHailEffect(container) {
            for (let i = 0; i < 60; i++) {
                const hail = document.createElement('div');
                hail.className = 'hail-stone';
                hail.style.left = `${Math.random() * 100}%`;
                hail.style.animationDuration = `${0.3 + Math.random() * 0.3}s`;
                hail.style.animationDelay = `${Math.random() * 2}s`;
                container.appendChild(hail);
            }
        }

        function createFogEffect(container) {
            const fog = document.createElement('div');
            fog.className = 'fog-layer';
            container.appendChild(fog);
        }

        function createCloudyEffect() {
            const overlay = document.createElement('div');
            overlay.className = 'cloudy-overlay';
            document.body.appendChild(overlay);
        }

        function createSunnyEffect() {
            const overlay = document.createElement('div');
            overlay.className = 'sunny-overlay';
            document.body.appendChild(overlay);
        }

        // ========== NIGHT SKY & CONSTELLATIONS ==========
        function initNightSky() {
            const hour = new Date().getHours();
            const isNight = hour < 6 || hour >= 18;
            
            if (isNight) {
                const nightSky = document.createElement('div');
                nightSky.className = 'night-sky active';
                nightSky.id = 'nightSky';
                document.body.insertBefore(nightSky, document.body.firstChild);
                
                // Create background stars
                createStarField(nightSky);
                
                // Create constellations
                createConstellations(nightSky);
                
                // Create shooting stars
                createShootingStars();
            }
        }

        function createStarField(container) {
            // Create 150 random stars
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDuration = `${2 + Math.random() * 3}s`;
                star.style.animationDelay = `${Math.random() * 3}s`;
                
                // Vary star sizes
                const size = 1 + Math.random() * 2;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                
                container.appendChild(star);
            }
        }

        function createConstellations(container) {
            // Big Dipper
            const bigDipper = [
                {x: 15, y: 20}, {x: 18, y: 18}, {x: 20, y: 20},
                {x: 22, y: 22}, {x: 24, y: 18}, {x: 26, y: 16}, {x: 28, y: 18}
            ];
            createConstellation(container, bigDipper, 'Big Dipper');
            
            // Orion's Belt
            const orion = [
                {x: 50, y: 45}, {x: 52, y: 45}, {x: 54, y: 45}
            ];
            createConstellation(container, orion, 'Orion');
            
            // Cassiopeia
            const cassiopeia = [
                {x: 75, y: 25}, {x: 77, y: 22}, {x: 79, y: 25},
                {x: 81, y: 22}, {x: 83, y: 25}
            ];
            createConstellation(container, cassiopeia, 'Cassiopeia');
        }

        function createConstellation(container, points, name) {
            const constellation = document.createElement('div');
            constellation.className = 'constellation';
            constellation.setAttribute('data-name', name);
            
            // Draw stars
            points.forEach(point => {
                const star = document.createElement('div');
                star.className = 'constellation-star';
                star.style.left = `${point.x}%`;
                star.style.top = `${point.y}%`;
                constellation.appendChild(star);
            });
            
            // Draw connecting lines
            for (let i = 0; i < points.length - 1; i++) {
                const line = document.createElement('div');
                line.className = 'constellation-line';
                
                const x1 = points[i].x;
                const y1 = points[i].y;
                const x2 = points[i + 1].x;
                const y2 = points[i + 1].y;
                
                const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
                const angle = Math.atan2(y2 - y1, x2 - x1) * (180 / Math.PI);
                
                line.style.left = `${x1}%`;
                line.style.top = `${y1}%`;
                line.style.width = `${length}%`;
                line.style.transform = `rotate(${angle}deg)`;
                
                constellation.appendChild(line);
            }
            
            container.appendChild(constellation);
        }

        // ========== SHOOTING STARS ==========
        function createShootingStars() {
            const nightSky = document.getElementById('nightSky');
            if (!nightSky) return;
            
            // Create a shooting star every 3-8 seconds
            function launchShootingStar() {
                const star = document.createElement('div');
                star.className = 'shooting-star';
                
                // Random starting position (top 30% of screen, anywhere horizontally)
                const startX = Math.random() * 100;
                const startY = Math.random() * 30;
                
                star.style.left = `${startX}%`;
                star.style.top = `${startY}%`;
                
                // Realistic comet physics:
                // 1. Angle: Meteors typically fall at 45-70 degrees
                // 2. Speed: Varies based on angle and "atmospheric entry"
                // 3. Distance: Longer trails for steeper angles
                
                const angle = 225 + Math.random() * 45; // 225-270 degrees (falling diagonally down-right)
                const angleRad = angle * (Math.PI / 180);
                
                // Distance based on "entry velocity" (random for variety)
                const velocity = 300 + Math.random() * 400; // 300-700px travel distance
                const distanceX = Math.cos(angleRad) * velocity;
                const distanceY = Math.sin(angleRad) * velocity;
                
                // Duration based on distance (realistic speed)
                const duration = 0.8 + Math.random() * 1.2; // 0.8-2 seconds
                
                star.style.setProperty('--meteor-angle', `${angle}deg`);
                star.style.setProperty('--meteor-distance-x', `${distanceX}px`);
                star.style.setProperty('--meteor-distance-y', `${distanceY}px`);
                star.style.animationDuration = `${duration}s`;
                
                // Tail length varies with velocity
                const tailLength = 80 + (velocity / 10);
                star.style.setProperty('--tail-length', `${tailLength}px`);
                
                nightSky.appendChild(star);
                
                // Remove after animation
                setTimeout(() => {
                    star.remove();
                }, duration * 1000);
            }
            
            // Launch first star after random delay
            setTimeout(() => {
                launchShootingStar();
                // Then launch periodically
                setInterval(launchShootingStar, 3000 + Math.random() * 5000);
            }, 2000 + Math.random() * 3000);
        }

        // ========== VIDEO CLICK HANDLERS ==========
        function initVideoClickHandlers() {
            const videoContainers = document.querySelectorAll('.video-container');
            
            videoContainers.forEach(container => {
                const videoId = container.getAttribute('data-video-id');
                if (!videoId) return;
                
                container.style.cursor = 'pointer';
                
                container.addEventListener('click', (e) => {
                    // Open YouTube video in new tab
                    window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
                });
            });
        }

        // ========== SAKURACRAFT GAME HANDLERS ==========
        function launchSakuraCraft() {
            const wrapper = document.getElementById('sakuracraft-wrapper');
            const iframe = document.getElementById('sakuracraft-iframe');
            
            if (!wrapper || !iframe) return;
            
            // Set iframe source with cache bust
            const timestamp = Date.now();
            iframe.src = `/games/sakuracraft/index.html?v=${timestamp}`;
            
            // Show the game
            wrapper.style.display = 'flex';
            
            // Prevent body scroll
            document.body.style.overflow = 'hidden';
            
            // Optional: Add analytics if available
            if (typeof gtag !== 'undefined') {
                gtag('event', 'game_launch', {
                    'event_category': 'engagement',
                    'event_label': 'SakuraCraft'
                });
            }
        }

        function closeSakuraCraft() {
            const wrapper = document.getElementById('sakuracraft-wrapper');
            const iframe = document.getElementById('sakuracraft-iframe');
            
            if (!wrapper || !iframe) return;
            
            // Hide the game
            wrapper.style.display = 'none';
            
            // Clear iframe source to stop game
            iframe.src = '';
            
            // Restore body scroll
            document.body.style.overflow = '';
        }

        // Handle ESC key to close game
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const wrapper = document.getElementById('sakuracraft-wrapper');
                if (wrapper && wrapper.style.display !== 'none') {
                    closeSakuraCraft();
                }
            }
        });

        // ========== INITIALIZE ==========
        document.addEventListener('DOMContentLoaded', () => {
            initClouds();
            initNightSky();
            initWeatherEffects();
            animatePoetry();
            createDiagonalPetals();
            initPoetryFlipCard();
            initParallax();
            initCelestialBody();
            createVideoSakuraFrames();
            initVideoClickHandlers();
        });
    </script>
</body>
</html>
